<?php 

defined('_JEXEC') or die('Direct Access to ' . basename(__FILE__) . ' is not allowed.');
JHTML::_('behavior.tooltip');
/**
 *
 *  Virtuemart 2 PayPal Payments Pro 1.0.5
 *  Online Store Copyright 2013
 *  The code contained in this file is copyright of online-store.co.uk
 *  You are not allowed to distribute or sell this code.
 *  http://plugins.online-store.co.uk/paypal_payments_pro.html
*/
 
if (!class_exists('vmPSPlugin'))require(JPATH_VM_PLUGINS . DS . 'vmpsplugin.php');class plgVmPaymentPaypalpaymentspro3dssc extends vmPSPlugin { public static $x0b = false;function __construct(& $x0c, $x0d) {parent::__construct($x0c, $x0d);$this->_loggable = true; $this->tableFields = array_keys($this->getTableSQLFields()); $this->_tablepkey = 'id'; $this->_tableId = 'id'; $x0e = array( "\163\x73\143\137\141\160\151\137us\x65\162n\141\155e" => array('', 'char'), "\163\163\x63_\x61\160\151_\160\141\x73\163w\157\x72d" => array('', 'char'), "\x73\x73\x63_\x61p\x69\x5f\163\151g\156a\x74\x75r\145" => array('', 'char'), "s\x73c_\x65\x6e\x76\151\x72\157\x6e\155\x65\156\x74" => array('', 'char'), "\x73s\143\x5f\x61\160\x69\137\163\x62\x5fu\163\x65\162\x6e\x61\155\x65" => array('', 'char'), "\x73\x73\143\137\x61\160\151_\x73\x62\137\x70\x61\x73\163w\x6f\162d" => array('', 'char'), "s\163\x63\137a\160i\x5f\163\142_sig\156\x61\164\165\x72\x65" => array('', 'char'), "s\x73\x63_p\141\x79\x6d\x65\x6e\x74\137\x61\x63\164\x69\x6f\x6e" => array('', 'char'),"\163\x73\x63\x5f\143\x65n\164\151\156\x65\154" => array(0, 'int'),"\163sc\137\x50\x72oce\x73\163\x6fr\111\144" => array('', 'char'), "\x73\163c_\115e\162c\x68\141n\164I\144" => array('', 'char'), "ss\143\x5f\x6ci\166e\137T\x72a\156\x73\141\x63\x74\x69onP\167\x64" => array('', 'char'), "\163\x73\143_test_\124\x72\x61\156\x73ac\x74\x69on\120\167d" => array('', 'char'),"\163\x73\x63\137\x6d\x65r\x63\150ant_c\157\x75\156\164\x72\x79" => array('', 'char'), "\x73\x73\143\137n\157aut\150\x65\156\x74\x69c\141\164\145" => array(0, 'int'), "\160\x61\x79me\156t_\x6c\157g\157\x73" => array('', 'char'),"\x70\x61\x79me\156\164\x5fcu\x72\162\x65\156\143\171" => array('', 'int'),"\x73\x61n\x64\142\x6f\x78" => array(0, 'int'), "\x70\x61\171\155\x65\x6et_\154og\x6f\163" => array('', 'char'),"\x64\145\x62ug" => array(0, 'int'),"\163t\x61t\165\x73\x5f\x70\x65n\x64\x69n\147" => array('', 'char'),"\163\164\141\x74\x75s_succ\x65\163\x73" => array('', 'char'),"s\x74\x61t\x75\163_\143\141n\143e\x6c\x65d" => array('', 'char'),"\x63\157\x75\x6e\164\162\x69\x65s" => array('', 'char'),"\x6di\156\x5f\x61\155ou\x6et" => array('', 'int'),"ma\x78\x5f\x61m\x6f\x75\x6et" => array('', 'int'),"c\157\x73t_\160e\x72_tr\141\x6e\x73ac\x74i\x6f\156" => array('', 'int'),"\x63os\x74_\x70\145\162\x63\x65\156\164\137\164\x6f\x74\141l" => array('', 'int'),"t\141\x78_i\144" => array(0, 'int') ); $this->setConfigParameterable($this->_configTableFieldName, $x0e); }public function getVmPluginCreateTableSQL() { return $this->createTableSQL('PayPal Payments Pro Table');}function getTableSQLFields() { $x0f = array( "id" => ' int(1) unsigned NOT NULL AUTO_INCREMENT ', "vi\x72\x74\165em\x61r\164\137\x6f\x72\x64\145\162_id" => ' int(1) UNSIGNED DEFAULT NULL', "or\x64e\x72\137num\142e\162" => ' char(32) DEFAULT NULL', "vi\162\164u\x65\155\141\162\x74\x5f\160\x61\171\x6d\x65\x6e\x74\155e\x74\150\x6fd\137\151\144" => ' mediumint(1) UNSIGNED DEFAULT NULL', "\160\x61y\155e\156\x74\137\156\x61\x6d\145" => ' char(255) NOT NULL DEFAULT \'\' ', "p\x61\171\x6den\x74\137o\x72\144e\x72\x5f\164ot\141\154" => 'decimal(15,5) NOT NULL DEFAULT \'0.00000\' ', "\x70\x61\x79\155en\x74_\143ur\162\x65\x6e\x63y" => 'char(3) ', "\x63\157s\x74_\160\x65r_\x74\162\x61\x6e\x73a\143t\x69\157\156" => ' decimal(10,2) DEFAULT NULL ', "\143\157\163\x74\x5fp\145\162\143\145\156t\x5ft\x6f\x74al" => ' decimal(10,2) DEFAULT NULL ', "\164ax\137i\x64" => ' smallint(1) DEFAULT NULL', "\160a\x79\160al\x5f\x63\165\163\x74\x6f\155" => ' varchar(255)  ',"\x54ra\x6esacti\x6fn\111d" => ' varchar(30)  ',"p\141ypa\x6c\x5fr\145s\x70\157\x6e\x73e_p\141\171m\145\156t_\163\164atu\163" => ' char(50) DEFAULT NULL', "p\141\x79p\x61\x6cr\145sp\157\x6es\x65\137\162a\167" => ' varchar(512) DEFAULT NULL' ); return $x0f;}function plgVmConfirmedOrder($x10, $x11){if (!($x12 = $this->getVmPluginMethod($x11['details']['BT']->virtuemart_paymentmethod_id))) { return null;} if (!$this->selectedThisElement($x12->payment_element)) { return false; }$x13 = JFactory::getSession(); $x14 = $x13->getId();$this->logInfo('plgVmConfirmedOrder order number: ' . $x11['details']['BT']->order_number, 'message');if (!class_exists('TableVendors')) require(JPATH_VM_ADMINISTRATOR . DS . 'table' . DS . 'vendors.php'); $x15 = new VirtueMartModelVendor(); $x15->setId(1); $x16 = $x15->getVendor(); $x15->addImages($x16, 1); $x17 = CurrencyDisplay::getInstance($x12->payment_currency); $x18 = round($x17->convertCurrencyTo($x12->payment_currency, $x11['details']['BT']->order_total,false), 2); $x19 = CurrencyDisplay::getInstance($x10->pricesCurrency);$x1a["o\162\x64\x65\162\137\x6eu\155\x62\x65r"] = $x11["\x64\145t\x61\x69\154\x73"]["\x42\x54"]->order_number; $x1a["p\141\x79\155e\156t\137\156a\155\145"] = $this->renderPluginName($x12, $x11); $x1a["\x76\x69\x72\164\165\145\x6d\x61\x72\164_\160\141\x79\155\x65nt\x6d\x65\164\x68\x6f\x64_i\144"] = $x10->virtuemart_paymentmethod_id; $x1a["\x63\165stom"] = $x14; $x1a["c\157\x73\x74\137p\145\x72_t\x72a\156sac\164io\156"] = $x12->cost_per_transaction; $x1a["c\x6fs\164_p\145\162\143\145\x6e\164\137\x74\x6f\164\x61\x6c"] = $x12->cost_percent_total; $x1a["\x70a\x79\x6d\145\x6et\137\x63u\162r\x65\156\143\x79"] = $x12->payment_currency; $x1a["\160a\x79m\145\156\x74\137\x6f\x72\x64e\x72\x5f\164\x6ft\141\154"] = $x18; $x1a['tax_id'] = $x12->tax_id;$x1a["\124\x72\141\x6es\141\x63t\151\157\x6eId"] = ''; $this->storePSPluginInternalData($x1a);$x1b = $x12->ssc_centinel;if($x12->debug){echo '<span style="color: ' . '#' . 'FF0000">';echo "<\142\x72\057\076\x59\157\165 \150\141v\145\x20\145\156ab\x6c\x65\144\040\144\x65bu\147gin\x67 i\156\040\163\145\164u\x70\x2e\x20T\x75\162n\040\x69\164 \x6f\146f t\157\040\x72e\155\157\166\x65 \141ny de\142\165g in\146o\162\155\x61\164i\157n<b\x72/\x3e<br\x2f>";echo '</span>';print "<\142\x72>or\x64\145r\x20i\144" . $x10->virtuemart_order_id;print "\074b\162>o\x72\x64\x65\x72 numbe\x72 " . $x11["\x64\x65ta\x69\x6c\x73"]["\102T"]->order_number . "\074\142r>\x3c\142\x72>"; }$x1c=''; $x1d='';$x1e='';$x1f='';$x20='';$x21 = 1;$this->dodirectpayment($x11,$x10->virtuemart_order_id,$x1b,$x1c,$x1d,$x1e,$x1f,$x20,$x21);print '<!-- Copyright Online Store 2013 '; $x22=' -->';return $this->processConfirmedOrderPaymentResponse(2, $x10, $x11, $x22, 'PayPal Payments Pro');}function dodirectpayment($x11,$x23,$x1b,$x1c,$x1d,$x1e,$x1f,$x20,$x21){$x24=1;$x24=0;$x22='';$x25 = $this->getDataByOrderId($x23);$x12 = $this->getVmPluginMethod($x25->virtuemart_paymentmethod_id);if(!$this->selectedThisElement($x12->payment_element)) { print 'no order id'; return false; } if (!class_exists('VirtueMartModelCurrency')) require(JPATH_VM_ADMINISTRATOR . DS . 'models' . DS . 'currency.php');$this->_debug = $x12->debug; $x26 = $x11['details']['BT']; $x27;if(isset($x11['details']['ST'])){$x27 = $x11['details']['ST'];} else{$x27 = $x11['details']['BT'];} $this->getPaymentCurrency($x12); $x28 = 'SELECT `currency_code_3` FROM `#__virtuemart_currencies` WHERE `virtuemart_currency_id`="' . $x12->payment_currency . '" ';$x29 = &JFactory::getDBO();$x29->setQuery($x28);$x2a = $x29->loadResult();$x28 = 'SELECT `currency_symbol` FROM `#__virtuemart_currencies` WHERE `virtuemart_currency_id`="' . $x12->payment_currency . '" '; $x29->setQuery($x28);$x2b = $x29->loadResult();$x2c= "";$x2d= 'Submit Payment'; $x2e = "";$x2f = "";$x30 = "";$x31="";$x32 = "\n"; $x33 = '';$x34 = 0;list($x35,$x36,$x34,$x37,$x38,$x39,$x33) = $this->order_form($x11,$x12);$x3a = ShopFunctions::getCountryByID($x26->virtuemart_country_id, 'country_2_code');$x3b = isset($x26->virtuemart_state_id) ? ShopFunctions::getStateByID($x26->virtuemart_state_id) : "";$x3c = ShopFunctions::getCountryByID($x27->virtuemart_country_id, 'country_2_code');$x3d = isset($x26->virtuemart_state_id) ? ShopFunctions::getStateByID($x27->virtuemart_state_id) : "";$x3e = $this->make_order_form($x12,$x26,$x27,$x3a,$x3c,$x3b,$x3d,$x2a); $x3f = ShopFunctions::getCountryByID($x26->virtuemart_country_id, 'country_2_code');$x3c = ShopFunctions::getCountryByID($x27->virtuemart_country_id, 'country_2_code');$x40='00';$x41='00';$x42='';$x43='';$x44='';if(isset($_POST['cc_month'])) { $x40=$_POST['cc_month']; } if(isset($_POST['cc_year'])) { $x41=$_POST['cc_year']; }if(isset($_POST['cc_security_code'])) { $x42=$_POST['cc_security_code']; }if(isset($_POST['cc_type'])) { $x43=$_POST['cc_type']; }if(isset($_POST['cc_number'])) { $x44=$_POST['cc_number']; }if($x1d === 'Y') { $x13 = JFactory::getSession();$x40 = $x13->get('cc_month'); $x42 = $x13->get('cc_security_code'); $x41 = $x13->get('cc_year'); $x44 = $x13->get('cc_number'); $x43 = $x13->get('cc_type'); } if($x24){print "<b\162>PA\122\x65\163St\x61\x74\165\163\x20$x1c"; print "\x3c\142\162\076c\x63\137m\x6fnth\x3a $x40";print "<br\076\x63c\137\x73\145c\165r\151ty\137\143\x6f\x64\x65:\x20$x42";print "\x3c\142r\076\x63\143_\x79\145\x61r:\x20$x41";print "\074b\162>\x63\143\137\x6e\165\x6d\x62\x65\162\072\x20$x44";print "\074br\x3e\143c_\x74\171\x70e\072\040$x43\x20<\x62\162\x3e";} $x45 ="\046\x50\101\131\115\x45\116TACT\x49\x4fN\075" . $x12->ssc_payment_action . "\046\103\122\105DIT\103\101\x52D\x54\x59\x50\x45\075" . $x43 ."\x26AC\x43T=" . $x44 ."\x26\105\130\120D\101\x54\x45=" . $x40 . $x41 ."\x26C\126\x56\x32\075" . $x42 . "\046\106\x49R\123\x54\116A\115E\x3d" . urlencode($x26->first_name) ."&L\101\123\124NA\115\x45\x3d" . urlencode($x26->last_name) . "&\x53T\122\105ET=" . urlencode($x26->address_1) ."\046\x53\x54\x52\105\105\x542\x3d" . urlencode($x26->address_2) ."&\103\x49\x54Y\x3d" . urlencode($x26->city) ."\046S\x54A\124\x45=" . urlencode($x3b) ."\046\132I\x50=" .urlencode($x26->zip) ."\046\x49NV\x4eUM=" . urlencode($x23) . "\046\103U\123T\x4f\x4d\x3d" . "\x26\103\x4f\125N\124\x52\131C\x4f\x44E=" . $x3f ."\046CU\x52REN\x43\x59C\117\104\105=" . $x2a ."\x26\111TE\115AM\124=" . $x34 ."&\123\110I\x50\x50\111\x4eGA\115\124\075" . $x39 ."\046\x54\101\130\101M\x54\075" . $x38 ."\046\x41\115\124\075" . $x36 ."&\x53\110\111\x50T\x4fN\101M\x45=" . urlencode($x27->first_name . ' ' . $x27->last_name) ."\046S\110\x49P\x54\117ST\122\105\x45\x54=" . urlencode($x27->address_1) ."&\123\110IPT\x4f\123\x54\122\105E\1242\075" . urlencode($x27->address_2) ."&\x53\110I\120T\x4f\x53\124\101T\x45\075" . urlencode($x3d) . "\x26\x53\110IP\x54\x4f\x43IT\131\x3d" . urlencode($x27->city) . "\046\x53\110I\120T\x4f\x5a\111\120\075" . urlencode($x27->zip) ."\x26\x53\110\111P\x54OCOUN\x54\122\x59\x43\x4fD\x45\x3d" . $x3c ."\x26P\x48O\116\x45\116U\115\075" . urlencode($x26->phone_1) ."\046\x45\x4d\x41\111L\x3d" . urlencode($x26->email) .$x33 ."\x26\x42\125T\x54ON\x53O\x55\x52C\x45\075" ."O\156\x6c\151\x6ee\x53to\x72\145\137\x43art_\x57P\120"; if(!isset($_POST["\143\x63_\156\x75\x6d\142e\x72"]) && $x21) { if($x24){ print "F\x69\x72\163\164 R\x75\156"; }}else{ if($x1b) {list($x46,$x1d,$x1f) = $this->centinel_redirect($x12,$x11,$x44,$x40,$x41,$x42,$x43,$x23,$x36); if($x46 === 'Enrolled'){ return;} if($x24){ print "\116\x6ft\040En\162\x6flle\x64:\x20\103\x65n\164\x69\x6eel\x3cb\x72\076"; print "\x45\143i\x46l\x61\147\x3a $x1f<\x62r\x3e"; print "Enr\157\x6cl\145d\x3a\040$x1d<b\x72>"; } }if($x12->ssc_centinel) { $x45 .= '&AUTHSTATUS3DS=' . urlencode($x1c) . '&MPIVENDOR3DS=' . urlencode($x1d) . '&CAVV=' . urlencode($x1e) . '&ECI3DS=' . urlencode($x1f) . '&XID=' . urlencode($x20); }if($x24){print "\x3c\x62\162\x3e$x45: $x1c"; }$x47 = $this->PPHttpPost($x12,"\104oDir\x65\143\x74\x50aym\145\x6e\164", $x45); if("\123\x55C\x43E\x53\123" == strtoupper($x47["AC\x4b"]) || "S\x55\x43\103\105\123\x53W\x49\x54\x48\127\x41\x52\x4e\111\116\x47" == strtoupper($x47["\101\103K"])) { print "\x3c\x70\040s\164y\154e='\146o\x6et-si\x7ae\x3a\x20x-lar\x67\145'>" . JText::_('VMPAYMENT_PPP_3D_THANK_YOU_FOR_YOUR_ORDER') . "\074\x2fp>"; if (!class_exists("\126i\162\164u\145\115\141\162\x74\115\157de\x6cOr\x64\x65\x72s"))require( JPATH_VM_ADMINISTRATOR . DS . "m\x6f\144el\163" . DS . "\157\x72\x64\145\162\x73\x2ep\150p" ); $x48 = VmModel::getModel("\x6f\162\144\145r\163"); $x49["\x6fr\144e\x72_\163\164\x61t\x75s"] = "\x43"; $x49["vi\162tu\145\155a\x72\x74\137o\162\144\x65\x72\x5f\x69\144"] = $x23; $x49["c\x75\163\x74om\145\162\137\x6e\157\164\x69\x66i\x65\x64"] = 1; $x49["c\x6f\155\155\x65\156\x74s"] = "";$x48->updateStatusForOneOrder($x23, $x49, true);print '<!-- Copyright Online Store 2013 '; $x22=' -->'; if (!class_exists ('VirtueMartCart')) { require(JPATH_VM_SITE . DS . 'helpers' . DS . 'cart.php'); }$x10 = VirtueMartCart::getCart ();$x10->emptyCart (); JRequest::setVar('html', $x22);return;}else { $x4a=0; $x4b ="\x4eo"; print "\x3cspa\x6e st\x79l\x65='\146on\164-\146a\x6di\154\x79\072\040\x41\162i\x61l\054\040H\x65lve\164\151c\x61\054 \x73\x61\x6e\x73\055\x73\145r\x69\146; f\157\156t-\x73\151\172\x65\x3a\040\154\x61\x72g\x65; \143o\x6c\x6fr\x3a\x20\043F\x460\x30\x30\060'\076"; while(isset($x47["\x4c\x5f\114\x4f\116G\115\105S\123A\107E" . $x4a])) { if($x47["\x4c\x5f\105R\x52\x4f\122\103\117\104E" . $x4a] == "\x35\0600"){ print "\x54\150\145re\040\150\141s\040bee\156\x20a\156\x20u\x6e\153\156\x6f\167\x6e\x20\145\162r\157\162\056 \x49f t\x68\x65 \x65\x72ro\162 \x70\x65r\163\151st\x73 t\150e\x6e\040\x70\154e\141\163\145\x20\x63\x6f\x6e\x74\141\143\164\x20th\x65 me\x72\143h\141n\164 ab\157\x75\164\x20\164\150\151\x73 \164r\x61\x6e\163action\x3c\x62\162\x2f\076<\x62\162/\x3e"; } elseif($x47["\114\x5fE\122\x52\x4fRC\x4fDE" . $x4a] == "\x38\061\x32\x334"){print "";} elseif($x47["\x4c\x5f\105R\122ORC\117\x44\105" . $x4a] == "\061\0607\x35\x39"){print "P\x6c\x65\141\163\145 ch\145c\153 \171\x6fu\162 \143a\162\x64 \156\x75\155\142\145\x72\040\141\x6ed if\x20\171\x6f\165\040\x61\162\x65\x20\165s\x69\x6e\147\040t\150\145 \x72i\x67\x68\164 p\141\x79\x6d\x65nt c\141\162\144";} elseif($x47["\x4c\137\105\122R\117\122C\117D\x45" . $x4a] == "1\x30\0652\067"){print "\120\x6c\x65\141\x73\145\x20\x65\156t\145r a \x76\141\x6c\151\144 \x63\x72\145\144i\164 c\x61\162d\040n\165\x6db\145\162\x20\141\156d \x63\150\145c\x6b\040\171\x6f\165\162 t\x79\160\145\040o\x66\040c\x61\x72\x64\074\142r/><\142\162/\076";} elseif($x47["L_\x45\x52\x52\x4f\122C\117\x44E" . $x4a] == "\x38\061\062\x33\063"){print "P\154\145\x61se\040\x63\150\x65ck\040\x79o\x75\162\040\143r\145d\151\x74\x20c\x61\x72d\x20\x6eu\x6d\142\x65r\x3cbr\x2f\076\x3cb\x72/>";} elseif($x47["\114\137E\122\x52\117R\103\117DE" . $x4a] == "1\x30\064\061\x35"){print "A \x73uc\143\x65\x73s\146u\154\040t\162\x61\156\x73a\x63\164\151\157n \x68\x61\163 \x61\x6cr\145\141\144\171\x20b\145\x65\156\x20co\155\160\154\145\x74\145\144\x2e\074\142r\x2f\076\074br\057>";}elseif($x47["\114_E\122\x52\x4fRC\117\x44\x45" . $x4a] == "10\x35\060\x32"){print "\120\x6c\145as\x65\x20als\157 \x63\x68\x65c\x6b \x79\157\165r c\162edit\040c\x61r\x64\040\156\165\x6db\x65\162\040a\x6e\x64\040i\164'\x73\040\145\x78\x70\x69\x72\x79 \144\141\164\145\074\x62\162\057>\x3c\x62r/>";} elseif($x47["\114_\x45R\x52O\x52\x43\x4f\x44\x45" . $x4a] == "\061\x30\x30\x30\x32" && $x47["\x4c\137\114O\116\107\x4dES\x53A\x47E" . $x4a] == 'Security%20header%20is%20not%20valid'){print "P\154\x65as\x65\040\143\150\x65\x63\153\x20yo\x75r\x20\101PI \125s\x65\x72\156am\145\054 \120\141\x73s\167\157\x72\144 a\156d\040\123\151\147\156\x61\164\x75r\145\x20f\157r \171\x6f\x75\162 \114\151\166\x65\040\x6f\162\x20\x53a\156\144\142\157x\040\141\x63c\157u\156\x74\x2e";} elseif($x47["\114\x5f\105\122ROR\x43\117\104\105" . $x4a] == "1\x30\060\x30\062" && $x47["\114\x5fL\117\x4eGM\x45\123SAG\x45" . $x4a] == 'You%20do%20not%20have%20permissions%20to%20make%20this%20API%20call'){print "\x44\x6f\040\171\157\165\040h\141\x76\145 \141\x20v\141\x6c\x69\x64\x20\120a\x79m\x65\156\x74s\040P\162\x6f\040\114i\166e\x20o\162\040\x53\141\156\x64\142\x6f\170\x20\141\x63co\165nt\x20\x77it\150\x20\164he \x63\157\162r\x65\x63t \x41\120\111 \x55s\145r\156\141\155\x65\054\x20\x50a\x73s\167or\144\x20a\156\144\040\123\151g\x6e\141\x74u\162e";} elseif($x47["\114\137E\122\x52\117RC\117D\105" . $x4a] == "\061\060\x30\x30\061"){print "\124h\x65\x20\x50\141y\x50al\040\x73e\162\166\145r w\x61\163\040u\156\x61\x62\x6c\145\040t\157\x20\143\x6f\155plet\x65\x20\164\150e \164\162\141\x6e\x73\x61ct\x69on.\x20\120\x6ceas\145\x20\x74\162\171\040\x41\147\x61\x69\x6e";} elseif($x47["\x4c_\x45RRO\122C\x4fDE" . $x4a] == "\x31\060\0656\x32"){print "P\154\x65\x61se e\x6e\x74\x65\162 \x61 \166\x61\x6c\151\x64\x20\143\x72e\144\x69t\x20\143ar\x64\x20\145\170p\x69\x72a\164\151\x6f\156 \171\x65\141\x72.";}elseif($x47["\114_E\122ROR\103\117D\x45" . $x4a] == "\061\x307\x336"){print "\x4fu\x72 cre\x64\x69t\x20\x63\x61r\x64 p\x72o\x63\145\x73\x73o\162 f\x6f\165nd\040a\156 \x65r\162\x6fr\x20\151\x6e\x20\160\x61\x72\x74 \157\x66 \x74he\x20\x61\x64\144\162e\163\x73 \171\x6fu\040su\x70\x70l\x69\x65d.\074\x62\x72\076\074b\x72>"; print 'City: ' . $x27->city . "\074\142\162>";print 'Zip Code: ' . $x26->zip . "<br>";print 'State: ' . $x4c. "\074\x62\162\x3e<\x62\162\076";print "\x50l\145ase\x20\143h\145c\x6b \x66\x6f\x72\x20\141\x6e\x79 e\162\x72\157\162\x73\x20\157r\x20\155\151ss\160\x65\154\154\151\x6eg\163.\x20\x43o\162\x72\145ct\x20\x74\x68e\155\040\141nd\040or\144e\x72\040a\147\141\x69n\074\x62\x72>\074\142r>"; if(isset($x11['details']['ST'])){print '<a href="' . JROUTE::_(JURI::root()) . 'index.php?option=com_virtuemart&view=user&task=editaddresscart&addrtype=ST">Edit Address</a></strong>';} else{ print '<a href="' . JROUTE::_(JURI::root()) . 'index.php?option=com_virtuemart&view=user&task=editaddresscart&addrtype=BT">Edit Address</a></strong>';}}elseif($x47["\x4c\137\105RROR\x43O\104\105" . $x4a] == "\061\x30\x372\x39") { print "\x59\x6fu\162\x20\x41\x64\144\x72\145s\x73 d\157\040\x6e\157\164\040\151\156\143\154\x75\144\145\x20\141\040\123t\141t\145\x2e\x20P\x6c\145\141\x73e \141\144\144\x20\x61\x20\x53\164\x61te\056\x3cb\x72\x3e\x3c\142\x72\076";if(isset($x11['details']['ST'])){ print '<a href="' . JROUTE::_(JURI::root()) . 'index.php?option=com_virtuemart&view=user&task=editaddresscart&addrtype=ST">Edit Address</a></strong>'; } else { print '<a href="' . JROUTE::_(JURI::root()) . 'index.php?option=com_virtuemart&view=user&task=editaddresscart&addrtype=BT">Edit Address</a></strong>'; }} elseif($x47["L\x5fE\x52\122\x4fR\x43\117D\105" . $x4a] == "\061\x30\x37\x33\x30") { print "\x59o\165\162\x20\x41ddre\163s\040\144\157\040\156\157\164\040\x69\x6ec\154\x75\x64e\x20\x61\040Zi\x70\040\x43\x6f\144e\056\x20P\x6ce\x61\x73e\x20a\x64d\x20\x61\x20Zi\160\040\x43o\144\145\x2e\074\142r\x3e\x3c\x62\162>";if(isset($x11['details']['ST'])){ print '<a href="' . JROUTE::_(JURI::root()) . 'index.php?option=com_virtuemart&view=user&task=editaddresscart&addrtype=ST">Edit Address</a></strong>'; } else { print '<a href="' . JROUTE::_(JURI::root()) . 'index.php?option=com_virtuemart&view=user&task=editaddresscart&addrtype=BT">Edit Address</a></strong>'; }}else{ if($x4b == 'No') { print "\074\x62r>\x57e \150a\x76e\x20be\x65n\x20\x75\x6ea\x62\x6c\x65\040t\157 p\162\x6fc\x65\x73s\040\171o\x75r\040\160\x61\x79\x6d\145\x6et, \x70l\x65as\145\040\164\162\171 a\x67\x61\x69\156\x2e<br>"; $x4b='Yes'; } print $x47["\114\x5fE\x52\122O\x52C\117\x44\x45" . $x4a] . ":\040-" . urldecode($x47["L_LO\116G\x4d\x45S\123\101G\x45" . $x4a]) . "\x2d <\142\162\076<b\162>\r\n";} $x4a++;}print "\074\142\162\x3e\x3c\057s\160\141\156><b\162\x3e";}} $x4d = 0;if($x4d){print "\074\160 \x73\x74y\x6ce\x3d'f\157\156\x74-\163\x69\172\145\x3a\x20\155edi\165\x6d'>\124\x68\151\x73\x20i\x73 a d\x65\x6d\x6f\040ve\x72s\151\157n\x20of\x20th\145\040plu\147\x69\156.\074/\160\076\x0d
\x3c\160\x20\163t\x79\154e\075'\x66\x6f\156\x74-\163i\x7a\145: \155\145\144\151u\x6d'>\117\162\144e\x72\x73\040\x61\162e\x20\x72\145\163\164r\x69\143\x74\x65\144 to\x20\x53\141\x6e\144\x62\157x\040\157\162 \x54es\164 M\x6fd\145\x20\157\156\x6cy\x2e\074/\160\x3e
\074p \x73t\171l\145='\x66\157\156\x74\x2d\x73\x69\172\x65\072\040\155edi\165\x6d'><\x2f\x70\076";}print $x3e;print "<\x21\055\055\x20\x43\x6f\160\x79r\x69g\x68\x74 \117n\x6c\x69\156e\040S\164o\x72\x65\x20\062\060\061\063 ";$x22=' -->';$this->handlePaymentUserCancel($x23);}function handlePaymentUserCancel($x23) { if ($x23) { if (!class_exists('VirtueMartModelOrders'))require( JPATH_VM_ADMINISTRATOR . DS . 'models' . DS . 'orders.php' );$x48 = VmModel::getModel('orders');$x11['order_status'] = 'X';$x11['virtuemart_order_id'] = $x23;$x11['customer_notified'] = 0;$x11['comments'] = ''; $x48->remove(array('virtuemart_order_id' => $x23)); }}function print_error($x4b) {print $x4b; print '<br><br>Please try again<br>';print "<\x73c\x72\151p\x74\x20\x6ca\x6eg\165\x61\147\x65='\112\x61\166\141\x53\x63r\x69\160\x74'\076<!-\x2d\r\n" . "d\x6fc\165\x6de\x6e\164\x2e\167r\151t\145\x28'<\142\x72>\x3cbr\x3e\074i\156\x70u\164\x20\164\171\160e=\"bu\x74to\156\" v\141\154\x75\x65\075\"R\145t\165\x72n\"\040\156\x61\x6de\075\"\1421\"\x20o\156\x43\x6ci\x63\153\075\"h\151\x73t\x6f\162\x79\x2e\x67o\050\055\061\051\"\076&n\x62\x73p\x3b\x26\156b\163p\x3b'\051" ."\r\n-\x2d\x3e\074\057\163\143\x72\151\160\164>";print '</html></body>';}function order_form($x11,$x12){ if (!class_exists('CurrencyDisplay')) require(JPATH_VM_ADMINISTRATOR . DS . 'helpers' . DS . 'currencydisplay.php'); $x17 = CurrencyDisplay::getInstance();$x4e='';$x32 = "\n"; $x33 = '';$x34 = 0;$x4f = 0; if(isset($x11['details']['BT']->order_tax) && $x11['details']['BT']->order_tax > 0){$x4f = 1;}$x35='<table border="1" width="600" cellspacing="0" cellpadding="2" class="ssc">
  <tr>
    <td style="background-color: rgb(220,220,220)" width="50"><strong><font face="Arial"
    size="2">ID</font></strong></td>
    <td style="background-color: rgb(220,220,220)" width="400"><strong><font face="Arial"
    size="2">Item</font></strong></td>
    <td style="background-color: rgb(220,220,220); text-align: right;" width="50"><font face="Arial" size="2"><strong>Unit&nbsp;Price&nbsp;</strong></font></td>
    <td style="background-color: rgb(220,220,220); text-align: right;" width="50"><strong><font face="Arial"
    size="2">&nbsp;Quantity&nbsp;</font></strong></td>
    <td style="background-color: rgb(220,220,220); text-align: right;" width="50"><strong><font face="Arial"
    size="2">&nbsp;Totals</font></strong></td>
  </tr>';$x50 = 1; foreach ($x11["\151\164\145\x6d\163"] as $x51 => $x52){$x53 = substr(strip_tags($x52->order_item_name), 0, 127);$x54 = substr(strip_tags($x52->order_item_sku), 0, 127); $x55 = $x52->product_item_price;$x55 = $x17->convertCurrencyTo($x12->payment_currency, $x55, false);$x55 = number_format($x55,2,'.',''); $x56 = $x52->product_subtotal_with_tax;$x56 = $x17->convertCurrencyTo($x12->payment_currency, $x56, false);$x56 = number_format($x56,2,'.',''); $x57 = $x52->product_quantity;$x58 = $x52->product_attribute; $x59 = '<\\/span><span class=\\"costumValue\\'; $x5a = ':<\\/span><span class=\\"costumValue\\'; $x58 = str_replace($x59, $x5a, $x58); $x58 = strip_tags($x58);$x58 = preg_replace('/\{"[0-9]*":" /','',$x58);$x58 = preg_replace('/"}$/','',$x58); $x58 = preg_replace('/","[0-9]*":" /',' - ',$x58); $x5b = substr($x54 . $x58, 0, 127); $x5c = $x50-1;$x33 .= "&\114\x5f\x4e\101\x4d\105" . "$x5c=" . urlencode($x53) ."\x26\114_\116\x55\x4dBE\122" . "$x5c\075" . urlencode($x5b) ."&L\137\x51\x54Y" . "$x5c\075" . $x57 ."\046L\x5f\101M\x54" . "$x5c\x3d" . $x55; $x34 += $x57 * $x55; $x35 = $x35 . '<tr>';$x35 = $x35 . '<td valign="top">' . $x54 . "\074\057\x74\144\x3e"; $x35 = $x35 . '<td valign="top">' . $x53. '&nbsp;' . $x58; $x35 = $x35 . '</td>';$x35 = $x35 . '<td valign="top" align="right">' . $x55 . "\x3c\057td\076";$x35 = $x35 . '<td valign="top" align="right">' . $x57 . "<\057\164d>";$x35 = $x35 . '<td valign="top" align="right">&nbsp;&nbsp;' . number_format($x57 * $x55,2,'.','') . '</td>';$x35 = $x35 . '</tr>';$x50++;}if(isset($x11['details']['BT']->order_payment) && $x11['details']['BT']->order_payment > 0){$x5d = $x11['details']['BT']->order_payment; $x5d = $x17->convertCurrencyTo($x12->payment_currency, $x5d, false);$x5d = number_format($x5d,2,'.','');$x5c = $x50-1;$x33 .="\046L\x5f\116\101M\x45" . "$x5c\x3d\x4fr\x64e\162\x2b\x50\141ym\x65\156\164" ."&L_\116U\115\x42ER" . "$x5c\x3d\x74\162a\x6e\163co\x73\x74" . "\x26\114\x5fQ\124\131" . "$x5c\x3d\061" . "\x26\114\x5f\101\x4dT" . "$x5c\x3d" . $x5d;$x34 = $x34 + $x5d;$x50++;$x35 = $x35 . '<tr>'; $x35 = $x35 . '<td colspan="4"><p align="right">Order Payment:&nbsp;</td>'; $x35 = $x35 . '<td align="right">&nbsp;' . number_format($x5d,2,'.','') . '</td></tr>';}$x35 = $x35 . '<tr>';$x35 = $x35 . '<td colspan="4"><p align="right">Item Total:&nbsp;</td>';$x35 = $x35 . '<td align="right">&nbsp;' . number_format($x34,2,'.','') . '</td></tr>';$x34 = round($x34,2);$x39 = 0; if(isset($x11['details']['BT']->order_shipment) && $x11['details']['BT']->order_shipment > 0){ $x39 = $x11['details']['BT']->order_shipment; $x39 = $x17->convertCurrencyTo($x12->payment_currency, $x39, false);$x39 = number_format($x39,2,'.','');$x35 = $x35 . '<tr>'; $x35 = $x35 . '<td colspan="4"><p align="right">Shipping:&nbsp;</td>'; $x35 = $x35 . '<td align="right">&nbsp;' . number_format($x39,2,'.','') . '</td></tr>'; } $x38 = 0; if(isset($x11['details']['BT']->order_tax) && $x11['details']['BT']->order_tax > 0){$x38 = $x11['details']['BT']->order_tax;$x38 = $x17->convertCurrencyTo($x12->payment_currency, $x38, false);} if(isset($x11['details']['BT']->order_shipment_tax) && $x11['details']['BT']->order_shipment_tax > 0){ $x5e = $x11['details']['BT']->order_shipment_tax;$x5e = $x17->convertCurrencyTo($x12->payment_currency, $x5e, false); $x38 += $x5e;} if(isset($x11['details']['BT']->order_payment_tax) && $x11['details']['BT']->order_payment_tax > 0){ $x5f = $x11['details']['BT']->order_payment_tax;$x5f = $x17->convertCurrencyTo($x12->payment_currency, $x5f, false); $x38 += $x5f;}if($x38 > 0) { $x38 = number_format($x38,2,'.','');$x60 = number_format($x34,2,'.','');$x61 = number_format($x39,2,'.','');$x62 = number_format($x38,2,'.','');$x63 = $x60 + $x61 + $x62;$x63 = number_format($x63,2,'.','');$x64 = $x11['details']['BT']->order_total;$x64 = number_format($x64,2,'.','');if($x63 < $x64) { $x65 = $x64 - $x63;$x65 = number_format($x65,2,'.','');$x38 += $x65;} $x35 = $x35 . '<tr>'; $x35 = $x35 . '<td colspan="4"><p align="right">Sales Tax:&nbsp;</td>'; $x35 = $x35 . '<td align="right">&nbsp;' . number_format($x38,2,'.','') . '</td></tr>';}$x37 = 0;$x34 = number_format($x34,2,'.','');$x39 = number_format($x39,2,'.','');$x38 = number_format($x38,2,'.','');$x36 = $x34 + $x39 + $x38;$x36 = number_format($x36,2,'.','');$x66 = $x11['details']['BT']->order_total;$x66 = number_format($x66,2,'.','');if($x36 > $x66){$x37 = $x66 - $x36;$x36 = $x66; $x37 = number_format($x37,2,'.','');$x5c = $x50-1;$x33 .="&\x4c\137\116\x41\x4d\105" . "$x5c=\104isc\157u\x6e\164" ."&\114\137NU\x4d\102E\122" . "$x5c\x3d\104\151\163\x63\157unt" . "\x26L\137\x51\124Y" . "$x5c\x3d\x31" . "\x26\x4c\137\x41\x4d\x54" . "$x5c\075" . $x37;$x34 = $x34 + $x37;$x50++;$x35 = $x35 . '<tr>'; $x35 = $x35 . '<td colspan="4"><p align="right">Discount:&nbsp;</td>'; $x35 = $x35 . '<td align="right">&nbsp;' . number_format($x37,2,'.','') . '</td></tr>';}if($x36 < $x66){$x37 = $x66 - $x36;$x36 = $x66; $x37 = number_format($x37,2,'.','');$x5c = $x50-1;$x33 .="\046\x4c_N\101ME" . "$x5c\x3d\x53\165r\x63\150a\162\147\145" ."\x26L\x5f\116\x55M\102\x45\x52" . "$x5c=\x53\165\x72\x63\150\141\x72\147\x65" . "\x26\114\x5f\121T\131" . "$x5c\075\x31" . "\x26\114\x5f\x41MT" . "$x5c\075" . $x37;$x34 = $x34 + $x37;$x50++;$x35 = $x35 . '<tr>'; $x35 = $x35 . '<td colspan="4"><p align="right">Surchage:&nbsp;</td>'; $x35 = $x35 . '<td align="right">&nbsp;' . number_format($x37,2,'.','') . '</td></tr>';} $x35 = $x35 . '<tr>'; $x35 = $x35 . '<td colspan="4"><p align="right">Order Total:&nbsp;</td>'; $x35 = $x35 . '<td align="right">&nbsp;' . number_format($x36,2,'.','') . '</td></tr>'; $x35 .= '</table>'; return array($x35,$x36,$x34,$x37,$x38,$x39,$x33);}function centinel_redirect($x12,$x11,$x44,$x40,$x41,$x42,$x43,$x23,$x36){ $this->getPaymentCurrency($x12);$x28 = 'SELECT `currency_numeric_code` FROM `#__virtuemart_currencies` WHERE `virtuemart_currency_id`="' . $x12->payment_currency . '" '; $x29 = &JFactory::getDBO(); $x29->setQuery($x28); $x67 = $x29->loadResult(); require('CentinelClient.php');require('CentinelUtility.php');require('CentinelConfig.php'); $x68 = new CentinelClient; $x69 = $x12->ssc_ProcessorId; $x6a = $x12->ssc_MerchantId; $x6b = $x12->ssc_live_TransactionPwd; $x6c = $x12->ssc_live_TransactionPwd; $x4d = 0;$x6d ="";if($x12->ssc_environment === "\x73\x61n\x64\x62o\170" || $x4d==1){$x6e = $x12->ssc_test_TransactionPwd;} else{$x6e = $x12->ssc_live_TransactionPwd; }$x68->add('MsgType', 'cmpi_lookup');$x68->add('Version', '1.7');$x68->add('ProcessorId', $x69);$x68->add('MerchantId', $x6a);$x68->add('TransactionPwd', $x6e);$x68->add('TransactionType', 'C'); $x68->add('CardNumber', $x44);$x68->add('CardExpMonth', $x40);$x68->add('CardExpYear',$x41);$x68->add('CardCode', $x42);$x68->add('OrderNumber', $x23);$x68->add('OrderDescription', 'Internet Order');$x6f = round($x36 * 100);$x68->add('Amount', $x6f);$x68->add('CurrencyCode', $x67); if( !ini_get('safe_mode') ) { if(ini_get('max_execution_time') < 45){ set_time_limit(45);} }$x68->sendHttp(CENTINEL_MAPS_URL, CENTINEL_TIMEOUT_CONNECT, CENTINEL_TIMEOUT_READ); $x70 = $x68->getValue("\x45\162ror\x4e\157");$x71 = $x68->getValue("Er\162\157r\104\x65\x73c");$x1d = $x68->getValue("\x45\156rol\154\x65\x64"); $x1f = $x68->getValue("\105c\x69\106\154\141g"); $x72 = $x68->getValue("\124r\141\x6es\x61\143\164io\156Id");$x13 = JFactory::getSession();$x13->set('TransactionId', $x72);$x13->set('cc_month', $x40);$x13->set('cc_security_code', $x42);$x13->set('cc_year', $x41);$x13->set('cc_number', $x44);$x13->set('cc_type', $x43); $x73 = $x68->getValue("\120\x61yl\157\x61\x64");$x74 = $x68->getValue("\x41C\x53U\x72\154");$x72 = urlencode($x72);if($x1d === 'Y') {$x75=$x73;$x76 = $x11["\144\145\164\141\151\154\163"]["B\124"]->order_number; if($x12->debug) {print '<br>cmpi_lookup<br>'; print 'Order Total: ' . $x6f . '<br>'; print 'CC Number: ' . $x44 . '<br>';print "<\x62\x72\x3e\x45\162\162o\x72 No\072 $x70"; print "<\142\162\076E\x72\x72\x6f\162 \104\145\x73\143\x72i\x70\x74\x6fn\x3a\x20$x71";print "\x3c\x62\x72\x3e\123\145\x73Tra\x6esa\143\x74io\156\111\144\x3a" . $x13->get('TransactionId'); print "<\x62\162\076E\143\151\x46\154ag\x3a $x1f"; print "\074\x62r\x3e\x45\x6e\x72\x6fll\x65d\x3a\040$x1d";print "\074\x62r>\120ayl\157\141\144\072\040$x73"; print "<\142r\076\x41\103\x53U\x72l\x3a\040$x74\074\142\162\x3e"; print "\x3c\142\162\x3eMD\072\x20$x76<br\x3e";print 'max_execution_time' . ini_get('max_execution_time') . '<br>'; } $x32 = "\n";print '<font face="Arial" size="3">For your security, please fill out the form below to complete your order.<br>
Do not click the refresh or back button or this transaction may be interrupted or cancelled.</font>' . $x32; $x77 = htmlspecialchars(JROUTE::_(JURI::root() . 'index.php?option=com_virtuemart&view=pluginresponse&task=pluginnotification&tmpl=component'));print '<FORM name="postform" action="' . $x74 . '" method ="post" target="CAT">' . $x32; print '<input type="hidden" name="TermUrl" value="' . $x77 . '">'. $x32; print '<input type="hidden" name="PaReq" value="' . $x75 . '">'. $x32; print '<input type="hidden" name="MD" value="' . htmlspecialchars($x76) . '">'. $x32; print '</FORM>'. $x32; print '<IFRAME WIDTH="720" NAME = "CAT" HEIGHT="600" BORDER="0" FRAMEBORDER="0"></IFRAME>' . $x32; print '<IFRAME onLoad = "document.postform.submit();" NAME = "CAT3" SRC="" WIDTH="720" HEIGHT="60" BORDER="0" FRAMEBORDER="0"></IFRAME>' . $x32;return array('Enrolled',$x1d,$x1f); }else {if($x12->debug) {print "<\x62\x72\x3e\x63\x4e\x6f\164\x20\105\156\x72\x6f\x6cl\145\x64 o\x72\040T\x69me\x6f\x75\164"; print "<br\x3e\103\145\156\x74in\x65\154 \x45\162\x72\157r\x20\x4e\x6f\x3a $x70"; print "\x3c\142\162>E\162\162\157\162 D\x65\163cr\x69p\164o\156\x3a $x71"; print "\074\x62\x72>\124\162\x61\156\163\141\143\164ion\x49d\x3a $x72"; print "\x3cb\162\076\105\143\151F\x6ca\x67\072\040$x1f"; print "<\142\x72\x3eEnrol\154\x65d\072\040$x1d";print "\x3cbr\x3e\x50ay\x6c\x6f\x61\144:\040$x73"; print "\074\142\162\076A\103\x53\125\162l: $x74\074b\x72>";print 'max_execution_time' . ini_get('max_execution_time') . '<br>'; }}clearCentinelSession(); return array('NotEnrolled',$x1d,$x1f);}function plgVmgetPaymentCurrency($x78, &$x79) { if (!($x12 = $this->getVmPluginMethod($x78))) { return null;} if (!$this->selectedThisElement($x12->payment_element)) { return false; } $this->getPaymentCurrency($x12); $x79 = $x12->payment_currency;}function plgVmOnUserPaymentCancel() { if (!class_exists('VirtueMartModelOrders')) require( JPATH_VM_ADMINISTRATOR . DS . 'models' . DS . 'orders.php' ); $x7a = JRequest::getVar('on'); if (!$x7a) return false; $x29 = JFactory::getDBO(); $x7b = 'SELECT ' . $this->_tablename . '.`virtuemart_order_id` FROM ' . $this->_tablename . "\040\127\110\105\122\x45\x20 `or\144\x65\x72\137\156\x75\x6d\142\145\162`\x3d\x20'" . $x7a . "'"; $x29->setQuery($x7b); $x23 = $x29->loadResult(); if (!$x23) { return null; } $this->handlePaymentUserCancel($x23);return true;}function PPHttpPost($x12,$x7c, $x7d) { if(!ini_get('safe_mode')){if(ini_get('max_execution_time') < 45) {if(false === strpos(ini_get("d\151s\x61\142\154\x65_\x66\x75\156\x63ti\x6f\156\163"), "\x73\145\164\137\x74i\x6d\x65\x5fl\x69\x6d\x69t")){ set_time_limit(45);} else{ } }}$x7e = $x12->ssc_api_username; $x7f = $x12->ssc_api_password; $x80 = $x12->ssc_api_signature; $x81 = "ht\164\160s\x3a/\057\x61p\151-\x33\x74\056\160\141\x79p\x61\x6c.\143\x6fm/\x6e\x76p"; $x4d = 0;$x6d ="";if($x12->ssc_environment === "\x73\x61\x6e\x64b\x6f\170" || $x4d==1){$x7e = $x12->ssc_api_sb_username;$x7f = $x12->ssc_api_sb_password;$x80 = $x12->ssc_api_sb_signature; $x81 = "\150t\164p\163\072\x2f\057\x61\x70i\x2d3t\056\163a\156\144b\x6f\x78.\x70aypa\x6c.com\057\x6e\166\x70";}$x82 = urlencode('88.0');$x83 = curl_init(); curl_setopt($x83, CURLOPT_URL, $x81); curl_setopt($x83, CURLOPT_VERBOSE, 1);curl_setopt($x83, CURLOPT_SSL_VERIFYPEER, FALSE); curl_setopt($x83, CURLOPT_SSL_VERIFYHOST, FALSE); curl_setopt($x83, CURLOPT_RETURNTRANSFER, 1); curl_setopt($x83, CURLOPT_POST, 1);$x84 = "\x4dET\x48OD\075$x7c\046\x56\x45\x52\123\x49ON\075$x82\x26P\x57\x44=$x7f\x26USE\122\x3d$x7e\x26\123IGNA\124\x55\122E\075$x80$x7d";curl_setopt($x83, CURLOPT_POSTFIELDS, $x84);$x47 = curl_exec($x83); if(!$x47) {exit("$x7c\040fa\151l\x65\144\072 ".curl_error($x83).'('.curl_errno($x83).')'); }$x85 = explode("\x26", $x47); $x86 = array(); foreach ($x85 as $x50 => $x87) {$x88 = explode("\075", $x87);if(sizeof($x88) > 1) { $x86[$x88[0]] = $x88[1];} } if((0 == sizeof($x86)) || !array_key_exists('ACK', $x86)) {exit("I\156v\141\154\x69\x64\x20HTT\120 \x52\145\163\160o\x6e\x73e\040\146\157r\040P\117S\124 \x72\x65\161\165\145\x73\164\050$x84)\040t\x6f $x81\056"); } return $x86;}function make_order_form($x12,$x26,$x27,$x3a,$x3c,$x89,$x3d,$x2a){$x8a =JText::_('VMPAYMENT_PPP_3D_EDIT_BILLING_ADDRESS');$x8b =JText::_('VMPAYMENT_PPP_3D_EDIT_SHIPPING_ADDRESS');$x8c = JText::_('VMPAYMENT_PPP_3D_NAME');$x8d = JText::_('VMPAYMENT_PPP_3D_ADDRESS');$x8e = JText::_('VMPAYMENT_PPP_3D_CITY');$x8f = JText::_('VMPAYMENT_PPP_3D_STATE');$x90 = JText::_('VMPAYMENT_PPP_3D_COUNTRY');$x91 = JText::_('VMPAYMENT_PPP_3D_ZIP');$x92 = JText::_('VMPAYMENT_PPP_3D_TELEPHONE');$x93 = JText::_('VMPAYMENT_PPP_3D_EMAIL');$x94 = JText::_('VMPAYMENT_PPP_3D_PAYPAL_BILLING_ADDRESS');$x95 = JText::_('VMPAYMENT_PPP_3D_PAYPAL_SHIPPING_ADDRESS');$x96 = JText::_('VMPAYMENT_PPP_3D_ITEM_TOTAL');$x97 = JText::_('VMPAYMENT_PPP_3D_TAX');$x98 = JText::_('VMPAYMENT_PPP_3D_SURCHARGE');$x99 = JText::_('VMPAYMENT_PPP_3D_SHIPPING');$x9a = JText::_('VMPAYMENT_PPP_3D_ORDER_TOTAL');$x9b = JText::_('VMPAYMENT_PPP_3D_MONTH'); $x9c = JText::_('VMPAYMENT_PPP_3D_YEAR'); $x9d = 'http';if(isset($_SERVER["H\124\124P\x53"])) if ($_SERVER["HTTPS"] == "\x6f\156") {$x9d .= "s";}; $x9d .= ":\057/"; if ($_SERVER["\123\x45\x52\x56\x45R_\x50\x4f\x52\124"] != "\0700") {$x9d .= $_SERVER["\x53E\122\x56E\x52_\x4e\x41\115\105"]."\072".$_SERVER["\x53ER\x56\105\122\137\120\x4f\122\124"].$_SERVER["\122E\121\125\105ST\137UR\111"]; } else {$x9d .= $_SERVER["\123\x45\x52VER_NAM\105"].$_SERVER["R\105\121\125E\x53\x54\137\x55\x52\x49"]; }$x9e = $x9d; $x9e = htmlspecialchars(JROUTE::_(JURI::root() . 'index.php/index.php?option=com_virtuemart&view=cart&task=confirm')); $x9f = JROUTE::_(JURI::root()) . 'index.php?option=com_virtuemart&view=user&task=editaddresscart&addrtype=BT';$xa0 = JROUTE::_(JURI::root()) . 'index.php?option=com_virtuemart&view=user&task=editaddresscart&addrtype=ST'; $x40='00';$x41='00';$x42='';$x43='';$x44='';if(isset($_POST['cc_month'])) { $x40=$_POST['cc_month']; } if(isset($_POST['cc_year'])) { $x41=$_POST['cc_year']; }if(isset($_POST['cc_security_code'])) { $x42=$_POST['cc_security_code']; }if(isset($_POST['cc_type'])) { $x43=$_POST['cc_type']; }if(isset($_POST['cc_number'])) { $x44=$_POST['cc_number']; } $xa1='<option value="Visa">Visa</option>
<option value="MasterCard">MasterCard</option>
<option value="Discover">Discover</option>
<option value="Amex">American Express</option>
'; $xa2 = '';$xa3 = '';if($x12->ssc_merchant_country === 'CA') { $xa1= '<option value="Visa">Visa</option>
<option value="MasterCard">MasterCard</option>'; }if($x12->ssc_merchant_country === 'UK') { $xa1= '<option value="Visa">Visa Credit</option>
   <option value="Visa">Visa Electron</option>
   <option value="Visa">Visa Debit</option>
   <option value="MasterCard">MasterCard</option>'; } if($x2a === 'GBP' && $x12->ssc_merchant_country === 'UK') { $xa2 = '<tr>
       <td style="border-style:hidden;border:0px" align="right">Start Date: Maestro Cards Only:&nbsp; </td>
       <td style="border-style:hidden;border:0px" align="left" ><select name="cc_start_month" size="1" style="border: 1px solid #000000; margin: 2px;">
        <option value=""> ' . $x9b . ' </option>
        <option value="01">01</option>
        <option value="02">02</option>
        <option value="03">03</option>
        <option value="04">04</option>
        <option value="05">05</option>
        <option value="06">06</option>
        <option value="07">07</option>
        <option value="08">08</option>
        <option value="09">09</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
      </select><select name="cc_start_year" size="1" style="border: 1px solid #000000; margin: 2px;">
        <option value=""> ' . $x9c . ' </option>
        <option value="2015">2015</option>
        <option value="2014">2014</option>
        <option value="2013">2013</option>
        <option value="2012">2012</option>
        <option value="2011">2011</option>
        <option value="2010">2010</option>
        <option value="2009">2009</option>
        <option value="2008">2008</option>
        <option value="2007">2007</option>
        <option value="2006">2006</option>
        <option value="2005">2005</option>
        <option value="2004">2004</option>
        <option value="2003">2003</option>
        <option value="2002">2002</option>
        <option value="2001">2001</option>
        <option value="2000">2000</option>
      </select></td>
    </tr>';$xa3 = '
   <tr>
       <td style="border-style:hidden;border:0px" align="right">Issue Number: Maestro Cards Only:&nbsp; </td>
       <td style="border-style:hidden;border:0px" align="left"><input
      name="cc_issue_number" size="3" MAXLENGTH="2" type="text" style="border: 1px solid #000000; margin: 2px;"></td>
    </tr>';$xa1 .= '<option value="Maestro">Maestro</option>';}$x3e = '';$xa4 = ''; if($x12->ssc_centinel){$xa5 = htmlspecialchars(JROUTE::_(JURI::root() . 'plugins/vmpayment/paypalpaymentspro3dssc/images/'));$xa6 = '<p><a href="http://www.mastercard.co.uk/support/securecode-faq.html"><img alt="" height="53" src="' . $xa5 . 'mcsc_learn_more.gif" width="98" /></a>&nbsp;&nbsp;<a href="http://www.visa.co.uk/en/security/online_security/verified_by_visa.aspx"><img alt="" height="57" src="' . $xa5 . 'vbv_learn_more.gif" width="71" /></a></p>';$xa4 .= $xa6;}$xa4 .= <<<directorderform


\074\x73\143r\x69p\x74\040l\x61ng\165\141\x67\x65\075"J\x61\x76\x61S\143\162\x69p\164"\076\x0d\012\x3c\041\x2d\x2d\x0d

\012\x76\x61\162 \163\x75\x62\x6di\164\164\x65\144\x20\075\0400;\x0d\x0a\x0d\x0a\015\x0a  \040\040 \x20
\x0afun\x63t\x69\157\156 \106\157\162\155_\126a\x6c\151d\141\x74\x6f\162\050\164\150\x65F\x6f\162\155\051\x0d
\x7b\x0d\x0a\x69\146\x28\163\x75\142\x6di\164\164ed\x3d\075\061\x29
\012\x20  \173\x0d
 \040\x20\x61\x6c\145rt(\042\x59\157u \150a\x76\145\040\x61\154\x72ea\x64\171\040su\142\155i\164ted\x20\164\150\x69\x73 \146\x6f\162m");\015
 \040\040r\145\164\x75\162\x6e\040\x66\141\x6c\x73e\x3b\x0d\x0a\x20 \x20\175\x0d\x0a\015\012if\x20\x28th\x65\106\157r\155.c\143\x5f\x6eu\155b\145\162\x2e\166a\x6c\165\x65\040\075\x3d\040""\051
\x0a\040\x20{\015\012 \x20\040\x20\x61l\x65\162\x74\050"P\x6ceas\x65\x20ent\x65r \x61 cre\144\151t\x20\143a\162d\x20\x6e\165m\142\145\162.\042\x29\073
\x0a\040\040\040\040th\x65\x46or\155\056cc\137n\165\x6d\142\x65\162\x2ef\x6fcu\x73\050);\x0d\012\x20\x20\040\040re\164\165\x72n (f\141\154se)\x3b\015\x0a\x20\x20}
\x0a\x0d
\151\x66\040\x28t\150eF\157rm\056\x63\x63_\x73e\x63\x75ri\x74y_c\x6fd\x65\056\x76a\154ue\040\x3d\075 \042\042\051
\x0a\040\040\x7b\x0d\012 \x20 \040a\154er\164(\x22P\x6ce\141\163e\040\x65\x6e\x74\145\x72 \x61 S\x65\143\165\162it\171\x20\x43\157\144\x65 \050C\x53\103\051\x2e\042\x29;
\012\x20\x20\040 \x74\x68\145\106\157r\155.\x63\143\137\x73ecu\x72\151\x74\171\x5fco\144\145.\146o\x63u\163\x28)\x3b
 \x20\x20 \162\145t\165r\x6e\040\x28\x66\x61\x6c\163\145\051;
 \x20}\015\012\015\012  i\146\050s\165\142\x6d\151tt\145d\075\x3d0\051\015\x0a\040 \x20\x20{
\040 \040 /\x2f\x66o\162\x6d\056\163\x75bm\151\x74it.\144\151\x73\141\142\154\145\144=tr\x75e\073\015\012\040   \x73u\x62\155\151\164t\145\144 =\040\061;\x0d\012\040\040\040\x20\175
\012\015\x0a \x20\162\145\x74\165\x72\156\x20(t\x72\x75\145\x29\073\015
}
\x0a\057\057--\076</\163c\x72\x69\160\164\x3e\015\012\x0d\x0a
\012<\146\157\x72m\040m\145\x74\x68\157d\075\042\x70\x6f\x73\164" \141\143t\x69\157\156\075"$x9e\x22\x20\x6e\141\x6d\145\x3d"\x46\157r\x6d\x31"\x20t\x61\x72get\075\042_\160a\x72\x65\156\x74\x22
\x6f\x6esub\155\x69t="\162e\x74\165r\x6e F\157\162\x6d\x5f\x56a\154\x69d\141\164\x6f\162(\164h\151s)\x22\x3e\x0d
\x20\x0d\012 \x0d\x0a<t\x61ble
\x0a\x20\040\040\x63e\x6c\154\160\141d\x64\x69ng=\x220\042\x3e
\012\x3c\x74b\x6f\144y\x3e
\x0a\x20 \040 \x20\040 \015\012\x20\x20\040 \074t\162\x3e\015\012\040\040  \x20\x20\040<\x74d\x20s\x74\x79le\x3d\042\x62o\x72\144\145r\055\x73t\x79\x6ce:hid\x64e\x6e\073bo\x72\x64\145r:\x30p\x78\042 \141li\x67\x6e\x3d\042\x72\151g\150\x74\042\x3e<s\x74\162\x6fng>\x3ca\x20\150\162e\146\x3d\x22$x9f\x22>$x8a\074/a\076\074\x2f\163\x74\162\x6f\x6e\x67\076<\057t\144\076\x0d
\040   \x20\040\x20\x3c\164d\040\x73\164\x79\x6c\x65\x3d\x22\142\157r\144\x65\162\055\163t\171\154\x65\x3a\150\151\144d\145\x6e\073\x62o\x72d\x65r:0p\x78\042 a\x6cig\156\x3d\x22\154e\146\x74\x22\040\076&nb\163\x70\073<\057\164d>\x0d\012\040\040 \040\x3c/t\162>\x0d
\040\040\x20 \x3c\164r\076\015
\x20\040\040\040\x20\040\040\074\x74\144\x20\x73\x74\171\x6c\x65=\x22\142or\x64\x65r-\x73\x74\x79\x6c\145\072h\x69\144de\x6e\073\x62o\x72\144e\x72\x3a\x30\160\x78\x22\x20c\x6f\x6cspa\x6e="2\042\076<\x2f\164\x64\076
\x20\x20 \x20\x3c\x2ftr\076
\x0a\x20\x20\x20\x20\074\164\x72>
 \x20\040\x20\x20\x20 \074\164d\x20\x73t\171l\145=\x22bo\x72\x64er\x2dst\171\x6c\x65\x3a\150id\x64\145\x6e\073\142\x6frder:\x30p\170" a\x6c\x69\147n\x3d"\162i\147\x68\x74\x22\076$x8c\x3a<\x2ftd\x3e\x0d\012\040 \x20\x20\040\040\040\074td\040\x73t\171\154\x65="\142o\x72\x64\x65\162-s\164y\154\145\x3ah\151d\x64en;\x62\x6f\x72\x64\145r\072\060px"\040\141\x6ci\x67n\075"l\145\146\164\042 >\x26\156\x62s\x70\x3b\015
 \x20 \x20 \040\x0d
$x26->first_name\x20$x26->last_name\x20
\x0a\040  \x20\040\x20
\x3c/\x74d>\015\x0a\040\x20 \040\x3c\057t\x72\076\x0d
  \x20\040<\x74\x72\076\015\x0a\x20\040 \040\x20\x20\x20\074td\x20\x73\164\x79le\x3d\042bo\162d\145r\x2d\x73\164yle\072\150\x69\144d\x65\156\x3b\142\157\162\144\145\x72:\060\x70\x78\042\x20\141\x6c\151gn=\x22\162\151\147\150\164\042\076$x8d\x3a\x3c\057t\144\076\015
    \x20\040\040<t\x64 \163\164\171l\x65=\042\x62\x6fr\x64e\x72-s\x74\171\154e:h\x69\x64\144\145\x6e\x3b\142\x6fr\144\x65\162\0720\x70\x78"\x20\x61\154\x69\x67\156\075\042\x6cef\164\x22\x20\076\x26n\x62\163\x70\073
 \040\x20 \x20 \x0d
$x26->address_1 \x20 \x20 
\012\x20 \040 \x20\x20\015
    \040\040\x3c\x2ft\x64\076\x0d\x0a\x20\x20\040 \x3c\057t\162\x3e\015\012   \040\074\x74r\076\x0d
 \x20\x20\040 \x20\x3ct\x64\x20s\x74yl\x65\x3d\042\142\x6fr\144er\055\x73\164y\154\x65\x3a\150\151\x64\x64\145\156\073\142\x6f\x72\x64\145\162\x3a0\x70x"\040\x61\x6ci\x67n\075\042ri\x67\150\164"\076\x3c\x2f\x74d\x3e
\012\040\040\x20\040\040\x20\x20\074\x74\144\x20\x73\164\171l\x65\075\x22\142\157\x72\144\145\162-\x73\x74\171\x6c\x65:\x68id\144\145n;\142\157r\x64er\x3a0\x70\x78\x22\040a\154\x69\x67\156\x3d\x22\154\145f\164\042\x20\x3e\046\156\142\163\160;\015
$x26->address_2\015\012\x20\040\040\040\040 <\057td>\x0d\x0a\040  \x20\x3c\x2ftr\x3e\x0d\012\x20  \040<t\x72\x3e\015
\040\x20 \x20  \040<\x74\144\040\163\164\x79\154e\075\042\x62\157\x72d\x65\162-s\x74yl\145:hi\144\144en\073\142\157\162\144e\x72:\x30\x70x\042\x20a\154ig\x6e=\042\x72i\x67\x68\x74\042>$x8e\072\x3c\057t\x64\076\x0d
\x20\x20 \040 \x20 <\x74\x64\040\163t\171le\075\x22b\x6f\162\144\x65\162\055\163t\171\154\145\072\150\x69\144d\x65n\x3b\x62\x6f\x72\x64\x65\x72\072\060\160\x78" \x61\x6cign="\154e\146t"\x20\x3e&\156\142\163p\073
\x0a$x26->city\040 \x20\x0d
\x20\040   \074/t\144\x3e
\012\x20\040 \x20\x3c\057\x74r\x3e\074\x74\x72\x3e\x0d\012\x20 \x20\x20\x20\x20\040\074\164\144\x20\163\164y\x6c\x65\075\042b\157\x72d\145r-st\171\154e\072\150id\144\145\156\x3b\142\157\x72d\x65\162:\060\x70\x78\042 \x61\x6ci\147\x6e=\042r\x69g\150t\x22\076$x8f\072\x3c\x2ft\x64>\015\x0a\040 \040  \040 \074t\144 \163t\x79le\075\x22\x62\x6fr\144er-\163\x74yl\145:hid\x64e\156;\142\157r\144er\072\060\x70\170"\x20\x61\154\151\147\x6e\x3d"l\145f\164\x22\040\x3e&n\x62\x73\x70\x3b\x0d\012$x89\x20  \x20\040\040\015\012\040\x20\040 \x20 </t\144>\015\x0a\x20\040\040\040\074/\164r\076\x3c\164\x72\x3e\x0d\x0a \040  \040 \040\074\x74\x64\040\163t\171\154\x65="\142\157rd\145\162-\x73t\x79\x6ce:\150\151\144d\x65\156\x3b\x62\157\162\144\x65r\x3a\060\x70x" \141l\x69\x67\x6e=\x22\x72i\147\150\x74\x22>$x90:\074\x2f\164d>\040  \040\x0d\x0a\x20 \x20 \040\x20\x0d\012       \x3ctd\040s\x74yle=\042\142or\x64\145r\x2dsty\154\x65\x3a\x68\151d\x64\145\x6e\073b\157\162d\x65\162\x3a\060\160x" \141l\151\147n=\042\154\x65\x66t\x22 \x3e\x26\156b\163\160;\015
$x3a
\040\x20\040\x20 \x20\x3c\x2f\164\144>\x0d
\040 \040\x20\074\x2ft\162\x3e
\012\040   \x3ct\x72\076\015\x0a\x20\x20  \x20\040\040\x3c\x74\144\040\163t\x79\x6c\145\x3d\x22bo\x72\144\x65\x72\055\163t\171l\x65\x3a\150\151\x64\144e\x6e\073b\157\x72\144\x65\162\x3a0\160\170\042\040\x61l\151\147n\075"\162\151g\x68\164\x22\x3e$x91\072\x3c\x2ftd\x3e\x0d
\x20 \x20\040\040 \x20\x3c\x74d s\x74\171\154\x65=\042b\157r\x64e\x72\055s\164yl\145\072\150\151\144de\156;\x62\x6f\x72d\145\x72:\x30\x70x\x22 \141l\151gn\x3d"\x6ce\x66\164\x22\040>\x26n\x62\x73\160;\015
$x26->zip\x20
\074/\164\x64>\x0d\012 \x20\040 <\x2f\x74\162\x3e
\x0a \040 \040\x3c\164r\076
\x20\x20\040\x20\x20\040 \x3ctd \x73t\x79l\x65=\042bo\x72d\145r-\163ty\x6ce\x3a\x68i\x64\144\x65\x6e\073\142ord\145\162\x3a0\160\x78\042\040a\x6ci\147\x6e\x3d"\162\x69\x67\150\164\x22\076$x93\x3a<\x2f\x74\x64>\015\x0a\040\x20\040 \040\x20 \074t\144 sty\x6ce\075\042b\157\162\144\145\x72\055s\164\x79\154\x65\x3a\x68\151dd\x65\156;b\x6f\162\144\x65\162\0720\x70x"\x20\x61\x6c\x69\x67\x6e\x3d"\x6c\x65\146t\042\040\x3e&\x6e\142\163p\073\x0d\012$x26->email
\x0a\040 \x20\x20 \040<\x2f\164d\076\x0d
\040 \x20\x20\040\x20<\057\x74\162\x3e\015\012 \x20\x20\x20<tr>\x0d\x0a\x20   \x20\x20\040<\x74d\x20s\x74\x79\x6c\x65\075\x22\142\157\x72\144e\x72\x2dstyl\x65\072\x68i\144d\x65\156\x3b\142\x6f\162d\x65r\072\060p\170\042 a\154\x69g\156\x3d\042rig\x68\x74\x22\x3e$x92:</\x74\x64>\015\x0a\x20  \040\x20 \x20\x3c\164d sty\x6ce\075\042\x62ord\x65r\055s\164\x79\x6c\145:\x68\151d\144\145\156\x3bb\x6f\162\144\x65\162\x3a0p\170\042 a\154\151\147\x6e="\x6c\145f\x74\042 \076&n\x62\163\160\x3b\x0d
$x26->phone_1\015\012\x20 \x20 \x20 \x3c\x2f\164d\x3e
\x0a\x20\040\x20\x20\074/\164\162\x3e\015\012\040\040\040 \x3c\164\162\x3e
\012 \x20 \x20  \x20<\x74\x64\x20\163\164\x79\154\x65\x3d\x22\x62o\162\x64e\x72\055s\x74\x79le\x3a\x68\x69\144den\073\142\x6f\162\144\x65\162\x3a\x30\160\170\042\x20\x3e&nbsp;\x26n\x62\163\x70\x3b<\x2f\x74\144\x3e
\x0a\040\040 \x20\x20  \x3c\164d\x20\163ty\154\x65\x3d\x22\x62\x6frd\145r-\x73\x74\x79\154\145\x3a\150i\144\x64\x65\x6e\073\x62\x6f\162\x64\145\x72\072\x30\x70x" \x61\x6c\x69g\x6e\x3d\x22\x6ce\x66\x74\042>\074/td\x3e\x0d
\040  \040\x3c\x2f\164\x72\076
\x0a \040 \x3c/\x74\x62\x6fd\171\076
\012\x20\x20\074\x2ft\x61\142\154\x65\x3e
directorderform;
$xa7 = <<<directorderform
\015\012\x3c\164\141\142l\145
 \x20\040\x63\145l\154\x70\x61\144\144i\x6eg\075\0422\042\x3e\015\x0a\x20\x20  \x3c\x74\162\x3e\015
\x20\x20  \x20\x20\040\074t\144\040\x73t\171l\145=\042\142\157\162\144\145r\x2d\x73\x74\x79\154\145\x3a\150\x69d\x64e\x6e;\142\157\x72d\145\x72\x3a\060\160\170\042\x20a\154ign="\x72\151\x67\x68\x74\042\x3e<\163\164\x72\x6f\x6eg\076\x3ca \x68\x72\145f\075\042$xa0\x22\076$x8b\074/a>\074/st\x72\157ng\076<\x2f\x74\x64>\015\x0a\x20\x20\x20\040\040\x20\040\x3ct\144\x20\x73\x74\x79\x6ce\x3d\042b\157\162\144\x65\162-s\x74\171\154e:\150i\x64\144\x65\x6e\073\142o\x72\144\x65\162:\060p\170"\x20a\154i\147\156\075"\x6c\x65\x66\164\042\040><\x2f\x74\144\076
 \x20\x20 \074\057t\x72\x3e
\x0a\040  \x20\074\164\162\040\141\x6ci\x67n\x3d\042\x63\x65\156\164\x65r\x22>
\040\040\040\x20\x20\040\x20\074t\144\x20\163\x74yl\x65\075\042\x62\157\162\x64\x65\162\x2dst\171l\x65\072\150id\x64\x65\x6e;\142\157\162\144e\x72:\060\x70x\x22 \141l\151g\x6e\075\x22\162\151\x67\150\164\042\076$x8c:\x3c\057\164\144>
\x0a\x20\x20  \x20 \040\074t\x64\040\x73\164\x79\x6ce=\x22\x62\157\162\x64\145\162\x2d\163ty\154\x65\072hi\x64d\145\156\073bor\x64\x65\162\x3a\060\x70x"\x20\x61lig\x6e\075"\154e\x66\x74\042\040\076\046n\142\163\160\x3b\015\012$x26->first_name\040$x26->last_name\x0d\x0a  \040\x20\040\040\074/\x74\144\x3e\x0d\012\x20\x20 \040<\057\x74\162\x3e\x0d\x0a\x20\x20\x20\x20<\164\x72\x20\141\x6ci\x67\x6e="c\x65\x6e\164\145\x72\042>\015\012\040 \040\040  \040<t\x64\040\x73t\x79\x6ce\075\x22b\157\162\x64\145r\x2d\x73\164\171\x6c\145:h\151\x64\x64\x65n\073bo\162de\162:\060px"\x20\x61\154\151g\x6e\075\x22\162i\x67\x68\164">$x8d:\x3c\057\x74\144\x3e
\x20\x20\040\x20\040\040 <t\x64\040s\x74\x79\x6c\x65=\042bo\x72de\162\x2ds\164yle\x3ahi\x64\x64\x65\156\x3b\x62\157\162d\145\162\0720\x70\170\042 a\x6ci\147\x6e\x3d\042l\x65\x66\x74\x22\x20\076&\156bs\x70;\x0d\012$x26->address_1   \040\x20\040\015\x0a  \040\040 \x20\074/\164\x64\076
 \x20\x20\x20\x3c\x2f\x74\x72\x3e
\x0a\x20\x20\040\x20<\164r\040a\154\x69\147n=\x22\143\145\x6e\164\x65\x72"\x3e\015
\040\040 \x20\040\040 \074\x74\x64\x20\163\164\171l\145=\042b\x6f\x72\144e\x72-\x73\164\x79le\x3a\x68\151\144\x64\145\156\073\x62\157\162\144\x65r\072\060\160x\042 \141l\151\x67\x6e\075\042\x72i\x67h\x74\042>\046n\142\163p\073\074\x2f\164\x64>\x0d\x0a\x20     \x20<\164\x64 \163t\171\154\x65="\x62\157\x72\x64\145\162-style\x3a\150\151\x64\x64\x65\156\073b\x6f\x72\x64e\x72:\x30\160x"\x20a\154\x69\147\x6e\075"l\x65\x66\x74\042\x20>\x26\x6e\142s\160;
\x0a$x26->address_2\x0d\x0a\040\x20\x20\x20 \x20\074\057td>\015
\040\x20  \074\057tr>\x0d\x0a \040 \040<t\x72\040a\154\151\x67\x6e="c\145\x6e\x74\145\162\042\076
\040   \x20 \040\x3ct\144\x20\x73\x74y\154e\x3d\042\142\x6f\x72\144\145\162\x2d\x73ty\154\x65:\150idd\x65\x6e;\x62o\x72\x64\145\x72:\x30\160x"\x20\141\x6c\x69\x67\x6e\x3d\042\162\x69\x67ht\x22>$x8e\072\074/\164\144\076\x0d\012\040\x20\040\040 \x20\040\x3c\x74d\x20\163\164\171\x6c\x65=\x22\142o\162d\145r-\163\164\x79\154e\072h\151\144d\145\156\073bo\162d\x65r:\060p\170"\040a\154\x69\x67\156\x3d\042\154\x65\146t\042\040\076\046nbsp\073\015\x0a$x26->city
\x0a \040\040\x20\040 \074\x2ft\144\x3e\x0d\012\040\040\x20\040\x3c\057\x74r\x3e\074\x74\x72 al\151\x67\x6e\075\x22c\145\x6e\x74e\x72"\x3e\015\012  \x20 \040 \040\x3ct\x64\x20\x73ty\154\x65=\x22\142\x6f\x72d\x65r\055\163\x74y\154\x65\x3ah\151d\144e\156;\142\x6f\162\x64\145\x72\072\x30\x70\170\x22 \x61\154\x69g\x6e\x3d"\162\x69g\x68\x74\x22>$x8f:</\x74d>\015
\x20 \x20\040\x20\x20 \074td s\164\171\x6c\145=\042\x62ord\x65r\055\163\x74y\x6c\145:h\151dde\156\073\142\157r\x64\145\x72:\060p\170"\040\141li\147\x6e\x3d\x22\x6c\145f\x74" \x3e\x26\156\142s\x70;
$x89
\x0a\040\040 \x20\040 \x3c/\x74\x64\076
\012\040\040\040 \074\057t\x72><\x74\162\040\141\x6c\151\x67\x6e\075\x22\x63\145\156\x74\145\x72\042\x3e\x0d
\040\x20\x20\040  \040\074\x74\144\040\163\164\x79\x6ce\075\042\x62\x6fr\144er\x2d\x73t\171\154\x65\072\150i\144d\x65n;bo\162de\x72\x3a0\x70\170\042 \x61\x6c\151\x67\x6e\075\042\x72\151\x67ht\042>$x90\072\074\x2ft\144\x3e\x0d\012 \x20 \x20  \x20<\x74\x64 \163\x74y\154\x65=\x22\x62\x6f\x72\144\145r\055\x73\164yl\x65\x3a\150i\x64d\x65\156\073\142\x6frd\x65\162:\x30\160\x78\x22\040\141l\151\147n=\042l\x65\146\x74" \076\x26n\x62\x73\160;\015\x0a$x3a \040\040  \040\015\x0a   \x20\040\x20\x3c\057t\x64\076\015\012 \040 \x20\074\x2f\164r\x3e\015\012\x20 \x20 <\164r\x20\x61l\151gn=\x22c\x65n\164\x65\x72\x22>\x0d\012  \x20\040\040 \040\074\x74\x64\x20\x73t\x79\154\145="b\157\162\x64er\x2d\163\x74\171\154e\x3ahid\144e\156\073\142o\162de\x72\x3a\x30\160x\x22\x20\x61li\x67\x6e\x3d"r\x69gh\x74"\076$x91\072\x3c/\x74\144\076
 \040\040\040\x20\x20 <td\040\x73t\171le\075\x22b\157\162\144\145\x72-\163\164yl\x65\x3a\150i\144de\156;\142\x6f\x72d\145\162\x3a0p\x78\x22\x20\141\154\151g\x6e\075\042l\145\146\x74\x22 >\046\x6eb\163\x70\x3b\015\012$x26->zip\015\x0a\040\040\040\040 \x20\074\057\164\144>\x0d\012\x20  \x20<\057t\x72>\x0d\012\015
\040 \040 <t\162\040\x61\x6ci\147\x6e\075\x22\143\x65\156t\145\162\042>
\012\x20\040\x20\040\040\x20 \074\x74d\040s\x74y\x6ce="b\x6fr\144e\x72\055\163\164yle\x3a\150i\x64d\145n;\x62\x6f\x72de\162\x3a\x30\160\170" \x3e\046n\142\x73p;\x26\156bs\160\x3b\x3c/\164\144\x3e\015
\x20\x20\x20\x20\040\040\040<\164\144 \x73\x74\171l\145\x3d\042\142\x6f\x72\x64\x65\162\055\163t\x79\154\x65:h\x69d\144\145n\x3b\x62\157\x72\x64er:\060px\x22 \x61\x6c\151\147\156="\x6c\145\x66\164\042 \076\x3c/\164\x64\x3e\x0d\012\040\040  <\057\x74\x72>\015\012 \040\x20\x20\015
  \x20   \x20\040<tr\x3e\x0d\x0a\x20\x20\040\040\x20\040 \x3ctd\x20\x73\164\171\x6ce\075\042\142\x6f\x72\x64\x65\162-\x73\164yl\x65\x3ahi\144\144\x65\x6e\x3bb\157\162d\x65\162\072\060\160x\042\040\076\x26n\142sp\x3b\046\x6eb\163\x70\x3b\x3c\057\164d\x3e
\012 \040  \074\x2ft\162>
 \x20 \074\x2ftbod\171\x3e\015
 \040<\057\164\141bl\x65>
directorderform;
$xa8 = JText::_('VMPAYMENT_PPP_3D_CREDIT_DEBIT_CARD_DETAILS');$xa9 = JText::_('VMPAYMENT_PPP_3D_CREDIT_DEBIT_CARD_TYPE');$xaa = JText::_('VMPAYMENT_PPP_3D_CARD_NUMBER');$xab = JText::_('VMPAYMENT_PPP_3D_SECURITY_CODE_CVV');$xac = JText::_('VMPAYMENT_PPP_3D_EXPIRY_DATE');$xad = JText::_('VMPAYMENT_PPP_3D_PLACE_ORDER');$xae = JText::_('VMPAYMENT_PPP_3D_RESET');$xaf = JText::_('VMPAYMENT_PPP_3D_WHAT_IS_CSC');$xb0 = '<span class="hasTip" title="' . $xaf . '">&nbsp; ' . $xab . '</span>';$xb1 = <<<directorderform
\x0d
\074\x74\141b\154e\x0d
 \040\040\x63el\x6c\x70\x61\x64\x64\151\156g=\042\062">
\x0a\x0d\x0a \x20\074t\162\x3e\015\x0a\x20\x20 \x20  \x20<\x74d s\x74y\x6c\x65\x3d\x22b\x6f\162\x64\145\x72\055s\x74y\x6ce\x3a\x68\x69\144den\x3b\x62\157r\144e\x72:\060\160\170" c\157\x6cs\x70\x61n\075\0422\x22 a\x6cign\x3d\042ce\156\x74\x65\162\042\x20\076\074\x73\x74\x72\157\x6e\x67\x3e$xa8</\x73t\x72\x6f\x6e\x67\x3e\x3c\x2f\164\144>\015
\040\040 \x20\x20\x20
\012\040\x20\x3c\x2f\x74\x72\076
\x0a\015\x0a\x20\x20\x3ctr\x3e
\040 \x20 \x20\040\x20\074\x74\144\x20s\x74y\154\145\075\x22b\157\162d\x65\162-\163\x74yl\145\072\x68i\x64\144e\156\073\142\x6f\162de\162:\060\160x\042\040\141\x6ci\147n\075\x22r\151\x67\x68\164">$xa9\072\046\156b\163p; \x3c/\164\144\x3e\x0d\x0a  \040\040\040\040 \x3c\164d\x20sty\154\x65\075\042\x62\x6f\162\144e\x72-\x73tyl\x65\x3ahi\144d\145n;\142\157\162\x64\145\162\x3a\x30\x70\170\x22 \x61li\147\x6e\075\042\x6c\145f\164\042\040>
\x0a\x20\x20\x20\040\040 \x3cs\x65\x6cec\164\040\x6e\141m\145\075\042c\x63_\164y\x70\x65"\040\163iz\145=\042\x31\042\x20\x20\x73t\x79l\145\075"\142\x6fr\144er\x3a\x20\061px\x20so\x6c\x69\144\040#0\x300\x30\x30\060;\x20\x6da\162g\151\x6e\x3a\040\x32\x70\170\x3b"\073\040m\x61\162\x67in\x3a \062\160\x78;\x22>\x0d\012
\x0a$xa1\015
\015\012\x09 \x3c/\x73e\154\145\x63\164\x3e\x3c/\164\144><\057\x74\162>\015\x0a\x20 \x20\x20\074tr\076
\012\x20  \x20 \040\040<t\144\040s\x74y\x6ce\x3d\042\x62o\x72\x64e\x72\055\163\x74y\x6c\x65:h\151\144d\x65\156\073\x62\157\x72der\072\060\x70\x78\042\x20\x61\154\151\x67n\x3d\042r\151g\150\x74\042\076$xaa\072\046\x6e\x62\163p;\040<\x2f\164\x64\076\015\x0a   \x20 \040\040\074t\144\x20\163tyl\x65\x3d\x22\x62or\x64\145\x72-\x73ty\154e\x3a\150i\144\x64\145n;\x62o\x72\144\x65\x72\0720\x70\x78"\040\x61l\x69\x67\156\075\x22\154\145f\164"\040\076\074\x69\156\x70\x75\164\x20n\141me\x3d\042\143c\x5f\x6eum\142\x65\162\042\040\x76a\154\165e\075"$x44"\x20s\151\172\x65\075"\0640\x22\040\x74ype\075\042\164\145\170\x74\x22\x20s\x74y\x6ce\x3d\x22\x62\157r\x64\145\162:\x201\160x\x20so\154\x69d\040\x23\x30\060\060\x30\0600;\x20mar\x67\151\x6e\072\x20\062\160\170;"\076\074/t\144>
\x0a\x20\x20\x20\x20\074\057\164\162>\x0d\012\040\x20 \040\074\x74r\x3e\x0d\012\040\040\040 \x20\040 \074\x74d\040s\164\x79l\x65=\x22\x62\x6f\x72\144\x65\x72-\x73t\171\154\145\072\150\151\144\x64e\156\073b\x6f\x72\144\x65r\072\060\x70\170\042\x20a\154\x69\x67n=\042r\151g\150\164">$xb0\x3a\046\156bs\160\x3b \074\x2f\164\x64\076\015
  \x20\x20 \x20 \074\164\x64\x20\x73t\171\x6c\x65=\x22\x62\x6f\162\144\x65\162\x2ds\x74y\154\145\072hidde\156;\x62\157\162d\x65\162:0\x70\170\x22 \141\154\x69\x67n\x3d\x22\154e\x66t\x22\x20>\074\151\x6epu\x74\x0d\x0a\x20\040\x20\x20\x20\x20n\x61m\145=\042\x63\x63\137\163ecur\151t\171\x5f\143\x6f\x64e\042 va\x6cue\x3d\042$x42\042\040s\151z\145=\042\x34\x22\x20max\154\x65n\x67\164h=\0424\042\x20\164\x79\160e=\x22\x74ex\164"\x20\x20s\x74\x79\154\x65=\x22\142o\162d\145r: \x31\x70x\040s\157l\x69\144 #\x30\x30\x300\x300;\040\155a\162g\x69\x6e\x3a\x20\062p\170;\x22\x3e</td\076
   \x20\074/\x74r\x3e<tr\076\x0d\012 \x20 \x20\015
$xa3
\012\040\040 \040
$xa2
directorderform;
$xb2 = '<td style="border-style:hidden;border:0px" align="right">' . $xac . ':&nbsp; </td>
       <td style="border-style:hidden;border:0px" align="left" ><select name="cc_month" size="1" style="border: 1px solid #000000; margin: 2px;">
         <option value="00"> ' . $x9b . ' </option>
        <option value="01">01</option>
        <option value="02">02</option>
        <option value="03">03</option>
        <option value="04">04</option>
        <option value="05">05</option>
        <option value="06">06</option>
        <option value="07">07</option>
        <option value="08">08</option>
        <option value="09">09</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>';$xb2 = str_replace("\x76\141\x6c\165\145\075\"$x40", "\x73\x65\154\x65\x63\164\x65\x64\040va\154ue\x3d\"$x40", $xb2);$xb3 = '</select><select name="cc_year" size="1"  style="border: 1px solid #000000; margin: 2px;">
        <option value="00"> ' . $x9c . ' </option>
        <option value="2010">2010</option>
        <option value="2011">2011</option>
        <option value="2012">2012</option>
        <option value="2013">2013</option>
        <option value="2014">2014</option>
        <option value="2015">2015</option>
        <option value="2016">2016</option>
        <option value="2017">2017</option>
        <option value="2018">2018</option>
        <option value="2019">2019</option>
        <option value="2020">2020</option>
        <option value="2021">2021</option>
        <option value="2022">2022</option>
      </select></td>';$xb3 = str_replace("\x76a\154u\x65=\"$x41", "se\x6ce\x63\164e\x64 v\x61\154\x75\x65\075\"$x41", $xb3);$xb1 .= <<<directorderform
\015\x0a$xb2
\x0a$xb3\040\015\x0a\x20\x20\x20\040\074\057\164\162>
\012  \x20\040\040\x20 \x3ct\162 \x61\154ign=\042\143\x65\156\164e\x72">\015\012\040\x20\040\x20\x20 \x20<\x74\144\040style\075\042\x62o\162\144\145\162\x2d\x73t\x79\154\x65\072\150\x69d\144\x65n;\142o\162\144\145r\x3a\060\x70\x78\042\040\076\x26\x6e\142s\x70;\x26\156b\163\160;</\164d>\015
\x20\x20\040\040\040 \x20\074\164d\x20s\x74\171\x6c\145="b\157\x72de\162\x2d\x73\164\171\154\145\x3ah\x69d\144e\x6e\073\x62\157\x72de\x72\072\060\160\170\x22 \x61\154i\x67\x6e\075\042\154\145\146\x74\042\040\x3e\074\x2f\164\144\x3e\015\012  \040 \x3c/tr>\015\012\040\x20\040 \x3c\x74\x72\x20alig\156\x3d\x22c\145\x6et\145r"\076\x0d\x0a\x20\040\x20\x20\040 \x20<td\x20\x73ty\154e=\x22\x62o\x72\144\145\162\x2dst\x79\154\x65\x3a\150\151\144d\145\x6e\073\x62or\144\x65r:\x30p\x78\042 \076\x26n\142\x73p\x3b&n\142\163\160\073\074\057\164\x64>
\040 \x20\x20\x20 \040\x3c\x74\144 st\171le\075"\142o\162\x64\x65\162\055st\171le\072h\x69\144\x64\145n;\x62\157\162de\x72\072\x30\x70\x78\042\x20\x61\x6cig\156\x3d\x22\x6c\145\146\164" \x3e\074i\x6ep\x75t\x0d\012\x20\040\x20\040  \x76\x61lue=\042$xad" \x6e\x61\x6d\x65\075\042\102\x31\x22\x20ty\x70\145\x3d\042s\165\142\x6d\x69t\x22\076 \x3c\x69n\160\165\x74 valu\x65\x3d\042$xae\x22\x20\x6e\x61\x6d\x65\x3d\042\102\062\x22\x20t\171p\x65\075"\162e\x73\x65\x74\042\076\x26\156b\163\160;\x0d
 \040\x20   \x3c/\x74\144\076\015\012\040\x20\040\x20\x3c/\x74r>
  \074\057\164a\142\x6c\x65\x3e\x0d\012<\x69\x6e\160\x75\164 typ\x65\075\047\x68\x69dd\x65\156\047\x20\156a\x6d\145=\047t\x61\163\x6b\x27 \x76\x61\x6c\165e\075'con\146\151\x72\155\047\x2f>\x0d\x0a	\011\x3c\x69\156\x70u\x74 ty\160e=\x27\150i\x64\144\x65\156\047\040\x6e\141\155e\x3d'o\160ti\x6f\156' \166\x61\154\x75\x65\075\x27c\x6f\x6d\x5f\x76i\162\x74u\x65\x6d\141\x72\x74\x27\x2f\x3e\x0d\x0a	\x09\x3cinput\x20\164\x79\x70e\075\047h\151\144\144\145\x6e\x27\040\x6ea\155e\x3d'\x76\x69e\167\x27 \166\141lu\145=\x27\x63a\162\x74'/>\015
\x3c\x2f\x66\157\162\x6d\x3e\x0d
\x3cp\x20\141l\151\147n="\x63en\x74\145r"\x3e\x26\x6e\142\x73p\073\074\x2fp\x3e\x0d
directorderform;
$xa4 .= $xb1;if($x12->ssc_centinel){$xa4 .= '<table>
<tr align="left" style="font-family: Arial; font-size: 12">
<td width="615">
Your card may be eligible or enrolled in Verified by Visa, MasterCard SecureCode or
JCB J/Secure payer authentication programs. After clicking the "Place Order" button,
your Card Issuer may prompt you for your payer authentication password to complete
your purchase.
</td>
</tr>
</table><br/>';}return $xa4;} function plgVmOnPaymentResponseReceived(&$x22) { return null; }function plgVmOnPaymentNotification() {if (!class_exists('VirtueMartModelOrders')) require( JPATH_VM_ADMINISTRATOR . DS . 'models' . DS . 'orders.php' );$x48 = new VirtueMartModelOrders();$xb4 = JRequest::get('post'); if (!isset($xb4["\x4d\x44"])){ return; }if (!isset($xb4["\120\141\x52\x65s"])){ return; } $x23 = VirtueMartModelOrders::getOrderIdByOrderNumber($xb4["\115D"]); $this->logInfo('plgVmOnPaymentNotification: virtuemart_order_id  found ' . $x23, 'message'); if (!$x23){return;} $x11 = $x48->getOrder($x23); $x1b = 0;$x25 = $this->getDataByOrderId($x23); $x12 = $this->getVmPluginMethod($x25->virtuemart_paymentmethod_id);if (!$this->selectedThisElement($x12->payment_element)) { return false; } require('CentinelClient.php');require('CentinelUtility.php');require('CentinelConfig.php');$x68 = new CentinelClient;$x69 = $x12->ssc_ProcessorId;$x6a = $x12->ssc_MerchantId;$x6b = $x12->ssc_live_TransactionPwd;$x6c = $x12->ssc_live_TransactionPwd; $x4d = 0;$x6d ="";if($x12->ssc_environment === "\x73a\x6e\144\x62\x6f\170" || $x4d==1) { $x6e = $x12->ssc_test_TransactionPwd; }else { $x6e = $x12->ssc_live_TransactionPwd; } $x68->add('MsgType', 'cmpi_authenticate');$x68->add('Version', '1.7');$x68->add('ProcessorId', $x69);$x68->add('MerchantId', $x6a);$x68->add('TransactionPwd', $x6e);$x68->add('TransactionType', 'C'); $x13 = JFactory::getSession();$x72 = $x13->get('TransactionId');$x68->add('TransactionId',$x72);$x68->add('PAResPayload', $xb4["P\x61\x52\145\163"]);$x68->sendHttp(CENTINEL_MAPS_URL, CENTINEL_TIMEOUT_CONNECT, CENTINEL_TIMEOUT_READ); $x70 = $x68->getValue("\105\x72ro\162N\157"); $x71 = $x68->getValue("\x45\x72\x72o\162\x44e\163\143"); $x1c = $x68->getValue("\120\x41\x52e\x73\123t\x61\164\165\163"); $x1f = $x68->getValue("\105c\151\106\x6ca\x67");$xb5 = $x68->getValue("\123\151\x67\156\141\164\x75\162e\126\x65ri\146\x69c\141\x74\x69\157n"); $x1e = $x68->getValue("\x43\141vv");$x20 = $x68->getValue("X\151d");if($x12->debug) {print "\074\142\x72\076P\x72\157\143\145\x73\x73\151\x6e\x67 s\x69\154\145\156\164\040\160\157s\164\x20\146\x72om\040\103e\156\164\151\x6e\145\x6c";print "\x3c\142\x72>E\x72\x72o\162\040\116o:\040$x70"; print "\074b\x72>\x45rr\x6f\x72\x20\x44\x65\x73\143\x72\151\x70t\x69\157n\x3a\x20$x71"; print "<b\162\x3e\x54\x72a\156\x73\x61c\164\151\157\156\120\167\x64: $x6e"; print "\x3c\142r\076\120\x41\x52esSt\x61tus\x3a\040$x1c"; print "\074\142\x72\076\x45\143\151F\154a\147\072\x20$x1f"; print "\x3cb\x72\076S\151\147\156atu\162\145\126\145\x72\x69\x66\x69c\x61\164io\156: $xb5"; print "\x3c\142r>n\157\141\x75\164\150e\x6e\x74i\143\x61t\x65\x3a\040$x12->ssc_noauthenticate";print "\074b\x72\076\103\x61\166\166\072\x20$x1e"; print "<\142\162\076Xid\x3a\x20$x20"; print "\074\142\x72>\164\x72\x61n\x73\x61c\164\151\157\156 \x69\144\072\040$x72 \074b\x72>"; }$x1d='Y'; if($xb5 === 'Y' && $x1c === 'Y') {$this->dodirectpayment($x11,$x23,$x1b,$x1c,$x1d,$x1e,$x1f,$x20,0); return; } if($xb5 === 'N') { print 'There has been an error and your order has not been processed.<br><br>
   Either attempt the order again or<br><br>if the error persists use another form of payment.<br>'; print '<br><br>'; return; } if($x1c === 'N') { print 'Authentication Failed<br><br>
   Your financial institution has indicated that it could not successfully authenticate<br>
   this transaction. To protect against unauthorized transactions, this card cannot be used to complete your purchase.<br><br>
   You may complete the purchase by selecting another form of payment.'; print '<br><br>'; return; } if($xb5 === 'Y' && $x1c === 'A') {print '<br><br>'; $this->dodirectpayment($x11,$x23,$x1b,$x1c,$x1d,$x1e,$x1f,$x20,0); return; } if($xb5 === '' && $x1c === '' && $x1e === '' && $x20 === '') { if($x12->ssc_noauthenticate){print 'There has been an error and your card could not be authenticated and<br><br>the order has not been processed.<br><br>
      Please use another form of payment or contact the merchant.';return;} else{$this->dodirectpayment($x11,$x23,$x1b,$x1c,$x1d,$x1e,$x1f,$x20,0);} return; } if(($x1c === 'U') && ($xb5 === 'Y')){$this->dodirectpayment($x11,$x23,$x1b,$x1c,$x1d,$x1e,$x1f,$x20,0);return; } if($x70 != '0') {print $x71; return; }else { print 'There has been an unknown Error:'; } return; } function _getTablepkeyValue($x23) { $x29 = JFactory::getDBO(); $x28 = 'SELECT ' . $this->_tablepkey . ' FROM `' . $this->_tablename . '` '. 'WHERE `virtuemart_order_id` = ' . $x23; $x29->setQuery($x28); if (!($xb6 = $x29->loadResult())) { JError::raiseWarning(500, $x29->getErrorMsg()); return ''; } return $xb6;}function plgVmOnShowOrderBEPayment($x23, $xb7) { if (!$this->selectedThisByMethodId($xb7)) { return null;} $x29 = JFactory::getDBO(); $x28 = 'SELECT * FROM `' . $this->_tablename . '` '. 'WHERE `virtuemart_order_id` = ' . $x23; $x29->setQuery($x28); if (!($xb8 = $x29->loadObject())) {return ''; } $this->getPaymentCurrency($xb8); $x28 = 'SELECT `currency_code_3` FROM `#__virtuemart_currencies` WHERE `virtuemart_currency_id`="' . $xb8->payment_currency . '" '; $x29 = &JFactory::getDBO(); $x29->setQuery($x28); $x2a = $x29->loadResult(); $x22 = '<table class="adminlist">' . "\n"; $x22 .=$this->getHtmlHeaderBE(); $x22 .= $this->getHtmlRowBE('Payment_Type', $xb8->payment_name);$xb9 = "pa\171p\x61\154\x5fr\x65s\x70\157\x6e\163e\137"; foreach ($xb8 as $x51 => $x87) { if (substr($x51, 0, strlen($xb9)) == $xb9) {$x22 .= $this->getHtmlRowBE($x51, $x87); } } $x22 .= '</table>' . "\n"; return $x22;} function getCosts(VirtueMartCart $x10, $x12, $xba) { if (preg_match('/%$/', $x12->cost_percent_total)) { $xbb = substr($x12->cost_percent_total, 0, -1); } else { $xbb = $x12->cost_percent_total; } return ($x12->cost_per_transaction + ($xba['salesPrice'] * $xbb * 0.01));}protected function checkConditions($x10, $x12, $xba) { $x26 = (($x10->ST == 0) ? $x10->BT : $x10->ST); $xbc = $xba['salesPrice']; $xbd = ($xbc >= $x12->min_amount AND $xbc <= $x12->max_amount OR ($x12->min_amount <= $xbc AND ($x12->max_amount == 0) )); $xbe = array(); if (!empty($x12->countries)) { if (!is_array($x12->countries)) {$xbe[0] = $x12->countries; } else {$xbe = $x12->countries; } }if (!is_array($x26)) { $x26 = array(); $x26['virtuemart_country_id'] = 0; } if (!isset($x26['virtuemart_country_id'])) $x26['virtuemart_country_id'] = 0; if (in_array($x26['virtuemart_country_id'], $xbe) || count($xbe) == 0) { if ($xbd) {return true; } } return false;}function plgVmOnStoreInstallPaymentPluginTable($xbf) { return $this->onStoreInstallPluginTable($xbf);}public function plgVmOnSelectCheckPayment(VirtueMartCart $x10) { return $this->OnSelectCheck($x10);}public function plgVmDisplayListFEPayment(VirtueMartCart $x10, $xc0 = 0, &$xc1) { return $this->displayListFE($x10, $xc0, $xc1);}public function plgVmonSelectedCalculatePricePayment(VirtueMartCart $x10, array &$xba, &$xc2) { return $this->onSelectedCalculatePrice($x10, $xba, $xc2);}function plgVmOnCheckAutomaticSelectedPayment(VirtueMartCart $x10, array $xba = array()) { return $this->onCheckAutomaticSelected($x10, $xba);}public function plgVmOnShowOrderFEPayment($x23, $x78, &$xc3) { $this->onShowOrderFE($x23, $x78, $xc3);}function plgVmonShowOrderPrintPayment($x7a, $xc4) { return $this->onShowOrderPrint($x7a, $xc4);}function plgVmDeclarePluginParamsPayment($xc5, $xc6, &$xc7) { return $this->declarePluginParams('payment', $xc5, $xc6, $xc7);}function plgVmSetOnTablePluginParamsPayment($xc5, $xc6, &$x35) { return $this->setOnTablePluginParams($xc5, $xc6, $x35);}} 